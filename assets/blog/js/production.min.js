function instapaper(a,b){window.location="http://www.instapaper.com/hello2?url="+encodeURIComponent(a)+"&title="+encodeURIComponent(b)}(function(){var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=Function.prototype,g=d.push,h=d.slice,i=d.concat,j=e.toString,k=e.hasOwnProperty,l=d.forEach,m=d.map,n=d.reduce,o=d.reduceRight,p=d.filter,q=d.every,r=d.some,s=d.indexOf,t=d.lastIndexOf,u=Array.isArray,v=Object.keys,w=f.bind,x=function(a){return a instanceof x?a:this instanceof x?(this._wrapped=a,void 0):new x(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):a._=x,x.VERSION="1.5.2";var y=x.each=x.forEach=function(a,b,d){if(null!=a)if(l&&a.forEach===l)a.forEach(b,d);else if(a.length===+a.length){for(var e=0,f=a.length;f>e;e++)if(b.call(d,a[e],e,a)===c)return}else for(var g=x.keys(a),e=0,f=g.length;f>e;e++)if(b.call(d,a[g[e]],g[e],a)===c)return};x.map=x.collect=function(a,b,c){var d=[];return null==a?d:m&&a.map===m?a.map(b,c):(y(a,function(a,e,f){d.push(b.call(c,a,e,f))}),d)};var z="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),n&&a.reduce===n)return d&&(b=x.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(y(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError(z);return c},x.reduceRight=x.foldr=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),o&&a.reduceRight===o)return d&&(b=x.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f){var g=x.keys(a);f=g.length}if(y(a,function(h,i,j){i=g?g[--f]:--f,e?c=b.call(d,c,a[i],i,j):(c=a[i],e=!0)}),!e)throw new TypeError(z);return c},x.find=x.detect=function(a,b,c){var d;return A(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},x.filter=x.select=function(a,b,c){var d=[];return null==a?d:p&&a.filter===p?a.filter(b,c):(y(a,function(a,e,f){b.call(c,a,e,f)&&d.push(a)}),d)},x.reject=function(a,b,c){return x.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},x.every=x.all=function(a,b,d){b||(b=x.identity);var e=!0;return null==a?e:q&&a.every===q?a.every(b,d):(y(a,function(a,f,g){return(e=e&&b.call(d,a,f,g))?void 0:c}),!!e)};var A=x.some=x.any=function(a,b,d){b||(b=x.identity);var e=!1;return null==a?e:r&&a.some===r?a.some(b,d):(y(a,function(a,f,g){return e||(e=b.call(d,a,f,g))?c:void 0}),!!e)};x.contains=x.include=function(a,b){return null==a?!1:s&&a.indexOf===s?-1!=a.indexOf(b):A(a,function(a){return a===b})},x.invoke=function(a,b){var c=h.call(arguments,2),d=x.isFunction(b);return x.map(a,function(a){return(d?b:a[b]).apply(a,c)})},x.pluck=function(a,b){return x.map(a,function(a){return a[b]})},x.where=function(a,b,c){return x.isEmpty(b)?c?void 0:[]:x[c?"find":"filter"](a,function(a){for(var c in b)if(b[c]!==a[c])return!1;return!0})},x.findWhere=function(a,b){return x.where(a,b,!0)},x.max=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);if(!b&&x.isEmpty(a))return-1/0;var d={computed:-1/0,value:-1/0};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>d.computed&&(d={value:a,computed:g})}),d.value},x.min=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);if(!b&&x.isEmpty(a))return 1/0;var d={computed:1/0,value:1/0};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},x.shuffle=function(a){var b,c=0,d=[];return y(a,function(a){b=x.random(c++),d[c-1]=d[b],d[b]=a}),d},x.sample=function(a,b,c){return arguments.length<2||c?a[x.random(a.length-1)]:x.shuffle(a).slice(0,Math.max(0,b))};var B=function(a){return x.isFunction(a)?a:function(b){return b[a]}};x.sortBy=function(a,b,c){var d=B(b);return x.pluck(x.map(a,function(a,b,e){return{value:a,index:b,criteria:d.call(c,a,b,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var C=function(a){return function(b,c,d){var e={},f=null==c?x.identity:B(c);return y(b,function(c,g){var h=f.call(d,c,g,b);a(e,h,c)}),e}};x.groupBy=C(function(a,b,c){(x.has(a,b)?a[b]:a[b]=[]).push(c)}),x.indexBy=C(function(a,b,c){a[b]=c}),x.countBy=C(function(a,b){x.has(a,b)?a[b]++:a[b]=1}),x.sortedIndex=function(a,b,c,d){c=null==c?x.identity:B(c);for(var e=c.call(d,b),f=0,g=a.length;g>f;){var h=f+g>>>1;c.call(d,a[h])<e?f=h+1:g=h}return f},x.toArray=function(a){return a?x.isArray(a)?h.call(a):a.length===+a.length?x.map(a,x.identity):x.values(a):[]},x.size=function(a){return null==a?0:a.length===+a.length?a.length:x.keys(a).length},x.first=x.head=x.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:h.call(a,0,b)},x.initial=function(a,b,c){return h.call(a,0,a.length-(null==b||c?1:b))},x.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:h.call(a,Math.max(a.length-b,0))},x.rest=x.tail=x.drop=function(a,b,c){return h.call(a,null==b||c?1:b)},x.compact=function(a){return x.filter(a,x.identity)};var D=function(a,b,c){return b&&x.every(a,x.isArray)?i.apply(c,a):(y(a,function(a){x.isArray(a)||x.isArguments(a)?b?g.apply(c,a):D(a,b,c):c.push(a)}),c)};x.flatten=function(a,b){return D(a,b,[])},x.without=function(a){return x.difference(a,h.call(arguments,1))},x.uniq=x.unique=function(a,b,c,d){x.isFunction(b)&&(d=c,c=b,b=!1);var e=c?x.map(a,c,d):a,f=[],g=[];return y(e,function(c,d){(b?d&&g[g.length-1]===c:x.contains(g,c))||(g.push(c),f.push(a[d]))}),f},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(a){var b=h.call(arguments,1);return x.filter(x.uniq(a),function(a){return x.every(b,function(b){return x.indexOf(b,a)>=0})})},x.difference=function(a){var b=i.apply(d,h.call(arguments,1));return x.filter(a,function(a){return!x.contains(b,a)})},x.zip=function(){for(var a=x.max(x.pluck(arguments,"length").concat(0)),b=new Array(a),c=0;a>c;c++)b[c]=x.pluck(arguments,""+c);return b},x.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},x.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=x.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}if(s&&a.indexOf===s)return a.indexOf(b,c);for(;e>d;d++)if(a[d]===b)return d;return-1},x.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=null!=c;if(t&&a.lastIndexOf===t)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(var e=d?c:a.length;e--;)if(a[e]===b)return e;return-1},x.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);d>e;)f[e++]=a,a+=c;return f};var E=function(){};x.bind=function(a,b){var c,d;if(w&&a.bind===w)return w.apply(a,h.call(arguments,1));if(!x.isFunction(a))throw new TypeError;return c=h.call(arguments,2),d=function(){if(!(this instanceof d))return a.apply(b,c.concat(h.call(arguments)));E.prototype=a.prototype;var e=new E;E.prototype=null;var f=a.apply(e,c.concat(h.call(arguments)));return Object(f)===f?f:e}},x.partial=function(a){var b=h.call(arguments,1);return function(){return a.apply(this,b.concat(h.call(arguments)))}},x.bindAll=function(a){var b=h.call(arguments,1);if(0===b.length)throw new Error("bindAll must be passed function names");return y(b,function(b){a[b]=x.bind(a[b],a)}),a},x.memoize=function(a,b){var c={};return b||(b=x.identity),function(){var d=b.apply(this,arguments);return x.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},x.delay=function(a,b){var c=h.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},x.defer=function(a){return x.delay.apply(x,[a,1].concat(h.call(arguments,1)))},x.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:new Date,g=null,f=a.apply(d,e)};return function(){var j=new Date;h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k?(clearTimeout(g),g=null,h=j,f=a.apply(d,e)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},x.debounce=function(a,b,c){var d,e,f,g,h;return function(){f=this,e=arguments,g=new Date;var i=function(){var j=new Date-g;b>j?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e)))},j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e)),h}},x.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}},x.wrap=function(a,b){return function(){var c=[a];return g.apply(c,arguments),b.apply(this,c)}},x.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},x.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},x.keys=v||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)x.has(a,c)&&b.push(c);return b},x.values=function(a){for(var b=x.keys(a),c=b.length,d=new Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},x.pairs=function(a){for(var b=x.keys(a),c=b.length,d=new Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},x.invert=function(a){for(var b={},c=x.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},x.functions=x.methods=function(a){var b=[];for(var c in a)x.isFunction(a[c])&&b.push(c);return b.sort()},x.extend=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},x.pick=function(a){var b={},c=i.apply(d,h.call(arguments,1));return y(c,function(c){c in a&&(b[c]=a[c])}),b},x.omit=function(a){var b={},c=i.apply(d,h.call(arguments,1));for(var e in a)x.contains(c,e)||(b[e]=a[e]);return b},x.defaults=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)void 0===a[c]&&(a[c]=b[c])}),a},x.clone=function(a){return x.isObject(a)?x.isArray(a)?a.slice():x.extend({},a):a},x.tap=function(a,b){return b(a),a};var F=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof x&&(a=a._wrapped),b instanceof x&&(b=b._wrapped);var e=j.call(a);if(e!=j.call(b))return!1;switch(e){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==a)return d[f]==b;var g=a.constructor,h=b.constructor;if(g!==h&&!(x.isFunction(g)&&g instanceof g&&x.isFunction(h)&&h instanceof h))return!1;c.push(a),d.push(b);var i=0,k=!0;if("[object Array]"==e){if(i=a.length,k=i==b.length)for(;i--&&(k=F(a[i],b[i],c,d)););}else{for(var l in a)if(x.has(a,l)&&(i++,!(k=x.has(b,l)&&F(a[l],b[l],c,d))))break;if(k){for(l in b)if(x.has(b,l)&&!i--)break;k=!i}}return c.pop(),d.pop(),k};x.isEqual=function(a,b){return F(a,b,[],[])},x.isEmpty=function(a){if(null==a)return!0;if(x.isArray(a)||x.isString(a))return 0===a.length;for(var b in a)if(x.has(a,b))return!1;return!0},x.isElement=function(a){return!(!a||1!==a.nodeType)},x.isArray=u||function(a){return"[object Array]"==j.call(a)},x.isObject=function(a){return a===Object(a)},y(["Arguments","Function","String","Number","Date","RegExp"],function(a){x["is"+a]=function(b){return j.call(b)=="[object "+a+"]"}}),x.isArguments(arguments)||(x.isArguments=function(a){return!(!a||!x.has(a,"callee"))}),"function"!=typeof/./&&(x.isFunction=function(a){return"function"==typeof a}),x.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},x.isNaN=function(a){return x.isNumber(a)&&a!=+a},x.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==j.call(a)},x.isNull=function(a){return null===a},x.isUndefined=function(a){return void 0===a},x.has=function(a,b){return k.call(a,b)},x.noConflict=function(){return a._=b,this},x.identity=function(a){return a},x.times=function(a,b,c){for(var d=Array(Math.max(0,a)),e=0;a>e;e++)d[e]=b.call(c,e);return d},x.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))};var G={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};G.unescape=x.invert(G.escape);var H={escape:new RegExp("["+x.keys(G.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(G.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(a){x[a]=function(b){return null==b?"":(""+b).replace(H[a],function(b){return G[a][b]})}}),x.result=function(a,b){if(null==a)return void 0;var c=a[b];return x.isFunction(c)?c.call(a):c},x.mixin=function(a){y(x.functions(a),function(b){var c=x[b]=a[b];x.prototype[b]=function(){var a=[this._wrapped];return g.apply(a,arguments),M.call(this,c.apply(x,a))}})};var I=0;x.uniqueId=function(a){var b=++I+"";return a?a+b:b},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var J=/(.)^/,K={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},L=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(a,b,c){var d;c=x.defaults({},c,x.templateSettings);var e=new RegExp([(c.escape||J).source,(c.interpolate||J).source,(c.evaluate||J).source].join("|")+"|$","g"),f=0,g="__p+='";a.replace(e,function(b,c,d,e,h){return g+=a.slice(f,h).replace(L,function(a){return"\\"+K[a]}),c&&(g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),d&&(g+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),e&&(g+="';\n"+e+"\n__p+='"),f=h+b.length,b}),g+="';\n",c.variable||(g="with(obj||{}){\n"+g+"}\n"),g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{d=new Function(c.variable||"obj","_",g)}catch(h){throw h.source=g,h}if(b)return d(b,x);var i=function(a){return d.call(this,a,x)};return i.source="function("+(c.variable||"obj")+"){\n"+g+"}",i},x.chain=function(a){return x(a).chain()};var M=function(a){return this._chain?x(a).chain():a};x.mixin(x),y(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];x.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!=a&&"splice"!=a||0!==c.length||delete c[0],M.call(this,c)}}),y(["concat","join","slice"],function(a){var b=d[a];x.prototype[a]=function(){return M.call(this,b.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this),function(a,b){function c(a,b){return function(){if(q.plugin.debug)return a.apply(this,arguments);try{return a.apply(this,arguments)}catch(c){q.plugin.errors.push({plugin:b,thrown:c,source:a.toString()}),this.emit("pluginerror",q.plugin.errors)}}}if(b.addEventListener){var d=Array.prototype,e=Object.prototype,f=d.forEach,g=d.slice,h=e.hasOwnProperty,i=e.toString,j=a.Popcorn,k=[],l=!1,m=!1,n={events:{hash:{},apis:{}}},o=function(){return a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(b){a.setTimeout(b,16)}}(),p=function(a){return Object.keys?Object.keys(a):function(a){var b,c=[];for(b in a)h.call(a,b)&&c.push(b);return c}(a)},q=function(a,b){return new q.p.init(a,b||null)};q.version="1.3",q.isSupported=!0,q.instances=[],q.p=q.prototype={init:function(a,c){var d,e,f=this;{if("function"!=typeof a){if("string"==typeof a)try{d=b.querySelector(a)}catch(g){throw new Error("Popcorn.js Error: Invalid media element selector: "+a)}if(this.media=d||a,e=this.media.nodeName&&this.media.nodeName.toLowerCase()||"video",this[e]=this.media,this.options=c||{},this.id=this.options.id||q.guid(e),q.byId(this.id))throw new Error("Popcorn.js Error: Cannot use duplicate ID ("+this.id+")");this.isDestroyed=!1,this.data={running:{cue:[]},timeUpdate:q.nop,disabled:{},events:{},hooks:{},history:[],state:{volume:this.media.volume},trackRefs:{},trackEvents:{byStart:[{start:-1,end:-1}],byEnd:[{start:-1,end:-1}],animating:[],startIndex:0,endIndex:0,previousUpdateTime:-1}},q.instances.push(this);var h=function(){f.media.currentTime<0&&(f.media.currentTime=0),f.media.removeEventListener("loadeddata",h,!1);var a,b,c,d,e,g;a=f.media.duration,b=a!=a?Number.MAX_VALUE:a+1,q.addTrackEvent(f,{start:b,end:b}),f.options.frameAnimation?(f.data.timeUpdate=function(){q.timeUpdate(f,{}),q.forEach(q.manifest,function(a,b){if(c=f.data.running[b]){e=c.length;for(var h=0;e>h;h++)d=c[h],g=d._natives,g&&g.frame&&g.frame.call(f,{},d,f.currentTime())}}),f.emit("timeupdate"),!f.isDestroyed&&o(f.data.timeUpdate)},!f.isDestroyed&&o(f.data.timeUpdate)):(f.data.timeUpdate=function(a){q.timeUpdate(f,a)},f.isDestroyed||f.media.addEventListener("timeupdate",f.data.timeUpdate,!1))};return Object.defineProperty(this,"error",{get:function(){return f.media.error}}),f.media.readyState>=2?h():f.media.addEventListener("loadeddata",h,!1),this}if("complete"===b.readyState)return a(b,q),void 0;if(k.push(a),!l){l=!0;var i=function(){m=!0,b.removeEventListener("DOMContentLoaded",i,!1);for(var a=0,c=k.length;c>a;a++)k[a].call(b,q);k=null};b.addEventListener("DOMContentLoaded",i,!1)}}}},q.p.init.prototype=q.p,q.byId=function(a){for(var b=q.instances,c=b.length,d=0;c>d;d++)if(b[d].id===a)return b[d];return null},q.forEach=function(a,b,c){if(!a||!b)return{};c=c||this;var d,e;if(f&&a.forEach===f)return a.forEach(b,c);if("[object NodeList]"===i.call(a)){for(d=0,e=a.length;e>d;d++)b.call(c,a[d],d,a);return a}for(d in a)h.call(a,d)&&b.call(c,a[d],d,a);return a},q.extend=function(a){var b=a,c=g.call(arguments,1);return q.forEach(c,function(a){for(var c in a)b[c]=a[c]}),b},q.extend(q,{noConflict:function(b){return b&&(a.Popcorn=j),q},error:function(a){throw new Error(a)},guid:function(a){return q.guid.counter++,(a?a:"")+(+new Date+q.guid.counter)},sizeOf:function(a){var b=0;for(var c in a)b++;return b},isArray:Array.isArray||function(a){return"[object Array]"===i.call(a)},nop:function(){},position:function(c){var d,e,f,g,h,i,j=c.getBoundingClientRect(),k={},l=(c.ownerDocument,b.documentElement),m=b.body;d=l.clientTop||m.clientTop||0,e=l.clientLeft||m.clientLeft||0,f=a.pageYOffset&&l.scrollTop||m.scrollTop,g=a.pageXOffset&&l.scrollLeft||m.scrollLeft,h=Math.ceil(j.top+f-d),i=Math.ceil(j.left+g-e);for(var n in j)k[n]=Math.round(j[n]);return q.extend({},k,{top:h,left:i})},disable:function(a,b){if(!a.data.disabled[b]){a.data.disabled[b]=!0;for(var c,d=a.data.running[b].length-1;d>=0;d--)c=a.data.running[b][d],c._natives.end.call(a,null,c)}return a},enable:function(a,b){if(a.data.disabled[b]){a.data.disabled[b]=!1;for(var c,d=a.data.running[b].length-1;d>=0;d--)c=a.data.running[b][d],c._natives.start.call(a,null,c)}return a},destroy:function(a){var b,c,d,e,f=a.data.events,g=a.data.trackEvents;for(c in f){b=f[c];for(d in b)delete b[d];f[c]=null}for(e in q.registryByName)q.removePlugin(a,e);g.byStart.length=0,g.byEnd.length=0,a.isDestroyed||(a.data.timeUpdate&&a.media.removeEventListener("timeupdate",a.data.timeUpdate,!1),a.isDestroyed=!0)}}),q.guid.counter=1,q.extend(q.p,function(){var a="load play pause currentTime playbackRate volume duration preload playbackRate autoplay loop controls muted buffered readyState seeking paused played seekable ended",b={};return q.forEach(a.split(/\s+/g),function(a){b[a]=function(b){var c;return"function"==typeof this.media[a]?(null!=b&&/play|pause/.test(a)&&(this.media.currentTime=q.util.toSeconds(b)),this.media[a](),this):null!=b?(c=this.media[a],this.media[a]=b,c!==b&&this.emit("attrchange",{attribute:a,previousValue:c,currentValue:b}),this):this.media[a]}}),b}()),q.forEach("enable disable".split(" "),function(a){q.p[a]=function(b){return q[a](this,b)}}),q.extend(q.p,{roundTime:function(){return Math.round(this.media.currentTime)},exec:function(a,b,c){var d,e,f=arguments.length;try{e=q.util.toSeconds(a)}catch(g){}if("number"==typeof e&&(a=e),"number"==typeof a&&2===f)c=b,b=a,a=q.guid("cue");else if(1===f)b=-1;else if(d=this.getTrackEvent(a))"string"==typeof a&&2===f&&("number"==typeof b&&(c=d._natives.start),"function"==typeof b&&(c=b,b=d.start));else if(f>=2){if("string"==typeof b){try{e=q.util.toSeconds(b)}catch(g){}b=e}"number"==typeof b&&(c=q.nop()),"function"==typeof b&&(c=b,b=-1)}return q.addTrackEvent(this,{id:a,start:b,end:b+1,_running:!1,_natives:{start:c||q.nop,end:q.nop,type:"cue"}}),this},mute:function(a){var b=null==a||a===!0?"muted":"unmuted";return"unmuted"===b&&(this.media.muted=!1,this.media.volume=this.data.state.volume),"muted"===b&&(this.data.state.volume=this.media.volume,this.media.muted=!0),this.emit(b),this},unmute:function(a){return this.mute(null==a?!1:!a)},position:function(){return q.position(this.media)},toggle:function(a){return q[this.data.disabled[a]?"enable":"disable"](this,a)},defaults:function(a,b){return q.isArray(a)?(q.forEach(a,function(a){for(var b in a)this.defaults(b,a[b])},this),this):(this.options.defaults||(this.options.defaults={}),this.options.defaults[a]||(this.options.defaults[a]={}),q.extend(this.options.defaults[a],b),this)}}),q.Events={UIEvents:"blur focus focusin focusout load resize scroll unload",MouseEvents:"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave click dblclick",Events:"loadstart progress suspend emptied stalled play pause error loadedmetadata loadeddata waiting playing canplay canplaythrough seeking seeked timeupdate ended ratechange durationchange volumechange"},q.Events.Natives=q.Events.UIEvents+" "+q.Events.MouseEvents+" "+q.Events.Events,n.events.apiTypes=["UIEvents","MouseEvents","Events"],function(a,b){for(var c=n.events.apiTypes,d=a.Natives.split(/\s+/g),e=0,f=d.length;f>e;e++)b.hash[d[e]]=!0;c.forEach(function(c){b.apis[c]={};for(var d=a[c].split(/\s+/g),e=d.length,f=0;e>f;f++)b.apis[c][d[f]]=!0})}(q.Events,n.events),q.events={isNative:function(a){return!!n.events.hash[a]},getInterface:function(a){if(!q.events.isNative(a))return!1;for(var b,c,d=n.events,e=d.apiTypes,f=d.apis,g=0,h=e.length;h>g;g++)if(c=e[g],f[c][a]){b=c;break}return b},all:q.Events.Natives.split(/\s+/g),fn:{trigger:function(c,d){var e,f;if(this.data.events[c]&&q.sizeOf(this.data.events[c])){if(e=q.events.getInterface(c))return f=b.createEvent(e),f.initEvent(c,!0,!0,a,1),this.media.dispatchEvent(f),this;q.forEach(this.data.events[c],function(a){a.call(this,d)},this)}return this},listen:function(a,b){var c,d=this,e=!0,f=q.events.hooks[a];return this.data.events[a]||(this.data.events[a]={},e=!1),f&&(f.add&&f.add.call(this,{},b),f.bind&&(a=f.bind),f.handler&&(c=b,b=function(a){f.handler.call(d,a,c)}),e=!0,this.data.events[a]||(this.data.events[a]={},e=!1)),this.data.events[a][b.name||b.toString()+q.guid()]=b,!e&&q.events.all.indexOf(a)>-1&&this.media.addEventListener(a,function(b){q.forEach(d.data.events[a],function(a){"function"==typeof a&&a.call(d,b)})},!1),this},unlisten:function(a,b){return this.data.events[a]&&this.data.events[a][b]?(delete this.data.events[a][b],this):(this.data.events[a]=null,this)}},hooks:{canplayall:{bind:"canplaythrough",add:function(a,b){var c=!1;this.media.readyState&&(b.call(this,a),c=!0),this.data.hooks.canplayall={fired:c}},handler:function(a,b){this.data.hooks.canplayall.fired||(b.call(this,a),this.data.hooks.canplayall.fired=!0)}}}},q.forEach([["trigger","emit"],["listen","on"],["unlisten","off"]],function(a){q.p[a[0]]=q.p[a[1]]=q.events.fn[a[0]]}),q.addTrackEvent=function(a,b){var c,d,e;b.id&&(c=a.getTrackEvent(b.id)),c&&(d=!0,b=q.extend({},c,b),a.removeTrackEvent(b.id)),b&&b._natives&&b._natives.type&&a.options.defaults&&a.options.defaults[b._natives.type]&&(b=q.extend({},a.options.defaults[b._natives.type],b)),b._natives&&(b._id=b.id||b._id||q.guid(b._natives.type),a.data.history.push(b._id)),b.start=q.util.toSeconds(b.start,a.options.framerate),b.end=q.util.toSeconds(b.end,a.options.framerate);var f,g,h=a.data.trackEvents.byStart,i=a.data.trackEvents.byEnd;for(f=h.length-1;f>=0;f--)if(b.start>=h[f].start){h.splice(f+1,0,b);break}for(g=i.length-1;g>=0;g--)if(b.end>i[g].end){i.splice(g+1,0,b);break}b.end>a.media.currentTime&&b.start<=a.media.currentTime&&(b._running=!0,a.data.running[b._natives.type].push(b),a.data.disabled[b._natives.type]||b._natives.start.call(a,null,b)),f<=a.data.trackEvents.startIndex&&b.start<=a.data.trackEvents.previousUpdateTime&&a.data.trackEvents.startIndex++,g<=a.data.trackEvents.endIndex&&b.end<a.data.trackEvents.previousUpdateTime&&a.data.trackEvents.endIndex++,this.timeUpdate(a,null,!0),b._id&&q.addTrackEvent.ref(a,b),d&&(e="cue"===b._natives.type?"cuechange":"trackchange",a.emit(e,{id:b.id,previousValue:{time:c.start,fn:c._natives.start},currentValue:{time:b.start,fn:b._natives.start}}))},q.addTrackEvent.ref=function(a,b){return a.data.trackRefs[b._id]=b,a},q.removeTrackEvent=function(a,b){for(var c,d,e,f=a.data.history.length,g=a.data.trackEvents.byStart.length,h=0,i=0,j=[],k=[],l=[],m=[];--g>-1;)c=a.data.trackEvents.byStart[h],d=a.data.trackEvents.byEnd[h],c._id||(j.push(c),k.push(d)),c._id&&(c._id!==b&&j.push(c),d._id!==b&&k.push(d),c._id===b&&(i=h,c._natives._teardown&&c._natives._teardown.call(a,c))),h++;if(g=a.data.trackEvents.animating.length,h=0,g)for(;--g>-1;)e=a.data.trackEvents.animating[h],e._id||l.push(e),e._id&&e._id!==b&&l.push(e),h++;i<=a.data.trackEvents.startIndex&&a.data.trackEvents.startIndex--,i<=a.data.trackEvents.endIndex&&a.data.trackEvents.endIndex--,a.data.trackEvents.byStart=j,a.data.trackEvents.byEnd=k,a.data.trackEvents.animating=l;for(var n=0;f>n;n++)a.data.history[n]!==b&&m.push(a.data.history[n]);a.data.history=m,q.removeTrackEvent.ref(a,b)},q.removeTrackEvent.ref=function(a,b){return delete a.data.trackRefs[b],a},q.getTrackEvents=function(a){for(var b,c=[],d=a.data.trackEvents.byStart,e=d.length,f=0;e>f;f++)b=d[f],b._id&&c.push(b);return c},q.getTrackEvents.ref=function(a){return a.data.trackRefs},q.getTrackEvent=function(a,b){return a.data.trackRefs[b]},q.getTrackEvent.ref=function(a,b){return a.data.trackRefs[b]},q.getLastTrackEventId=function(a){return a.data.history[a.data.history.length-1]},q.timeUpdate=function(a,b){var c,d,e,f,g,h=a.media.currentTime,i=a.data.trackEvents.previousUpdateTime,j=a.data.trackEvents,k=j.endIndex,l=j.startIndex,m=j.byStart.length,n=j.byEnd.length,o=q.registryByName,p="trackstart",r="trackend";if(h>=i){for(;j.byEnd[k]&&j.byEnd[k].end<=h;){if(c=j.byEnd[k],e=c._natives,f=e&&e.type,e&&!o[f]&&!a[f])return q.removeTrackEvent(a,c._id),void 0;c._running===!0&&(c._running=!1,g=a.data.running[f],g.splice(g.indexOf(c),1),a.data.disabled[f]||(e.end.call(a,b,c),a.emit(r,q.extend({},c,{plugin:f,type:r})))),k++}for(;j.byStart[l]&&j.byStart[l].start<=h;){if(d=j.byStart[l],e=d._natives,f=e&&e.type,e&&!o[f]&&!a[f])return q.removeTrackEvent(a,d._id),void 0;d.end>h&&d._running===!1&&(d._running=!0,a.data.running[f].push(d),a.data.disabled[f]||(e.start.call(a,b,d),a.emit(p,q.extend({},d,{plugin:f,type:p})))),l++}}else if(i>h){for(;j.byStart[l]&&j.byStart[l].start>h;){if(d=j.byStart[l],e=d._natives,f=e&&e.type,e&&!o[f]&&!a[f])return q.removeTrackEvent(a,d._id),void 0;d._running===!0&&(d._running=!1,g=a.data.running[f],g.splice(g.indexOf(d),1),a.data.disabled[f]||(e.end.call(a,b,d),a.emit(r,q.extend({},d,{plugin:f,type:r})))),l--}for(;j.byEnd[k]&&j.byEnd[k].end>h;){if(c=j.byEnd[k],e=c._natives,f=e&&e.type,e&&!o[f]&&!a[f])return q.removeTrackEvent(a,c._id),void 0;c.start<=h&&c._running===!1&&(c._running=!0,a.data.running[f].push(c),a.data.disabled[f]||(e.start.call(a,b,c),a.emit(p,q.extend({},c,{plugin:f,type:p})))),k--}}j.endIndex=k,j.startIndex=l,j.previousUpdateTime=h,j.byStart.length<m&&j.startIndex--,j.byEnd.length<n&&j.endIndex--},q.extend(q.p,{getTrackEvents:function(){return q.getTrackEvents.call(null,this)},getTrackEvent:function(a){return q.getTrackEvent.call(null,this,a)},getLastTrackEventId:function(){return q.getLastTrackEventId.call(null,this)},removeTrackEvent:function(a){return q.removeTrackEvent.call(null,this,a),this},removePlugin:function(a){return q.removePlugin.call(null,this,a),this},timeUpdate:function(a){return q.timeUpdate.call(null,this,a),this},destroy:function(){return q.destroy.call(null,this),this}}),q.manifest={},q.registry=[],q.registryByName={},q.plugin=function(a,b,d){if(q.protect.natives.indexOf(a.toLowerCase())>=0)return q.error("'"+a+"' is a protected function name"),void 0;var e=["start","end"],f={},i="function"==typeof b,j=["_setup","_teardown","start","end","frame"],k=function(a,b){return a=a||q.nop,b=b||q.nop,function(){a.apply(this,arguments),b.apply(this,arguments)}};q.manifest[a]=d=d||b.manifest||{},j.forEach(function(d){b[d]=c(b[d]||q.nop,a)});var l=function(b,c){if(!c)return this;if(c.ranges&&q.isArray(c.ranges))return q.forEach(c.ranges,function(b){var d=q.extend({},c,b);delete d.ranges,this[a](d)},this),this;var f,i=c._natives={},l="";return q.extend(i,b),c._natives.type=a,c._running=!1,i.start=i.start||i["in"],i.end=i.end||i.out,c.once&&(i.end=k(i.end,function(){this.removeTrackEvent(c._id)})),i._teardown=k(function(){var a=g.call(arguments),b=this.data.running[i.type];a.unshift(null),a[1]._running&&b.splice(b.indexOf(c),1)&&i.end.apply(this,a)},i._teardown),c.compose=c.compose&&c.compose.split(" ")||[],c.effect=c.effect&&c.effect.split(" ")||[],c.compose=c.compose.concat(c.effect),c.compose.forEach(function(a){l=q.compositions[a]||{},j.forEach(function(a){i[a]=k(i[a],l[a])})}),c._natives.manifest=d,"start"in c||(c.start=c["in"]||0),c.end||0===c.end||(c.end=c.out||Number.MAX_VALUE),h.call(c,"toString")||(c.toString=function(){var b=["start: "+c.start,"end: "+c.end,"id: "+(c.id||c._id)];return null!=c.target&&b.push("target: "+c.target),a+" ( "+b.join(", ")+" )"}),c.target||(f="options"in d&&d.options,c.target=f&&"target"in f&&f.target),c._natives&&(c._id=q.guid(c._natives.type)),c._natives._setup&&c._natives._setup.call(this,c),q.addTrackEvent(this,c),q.forEach(b,function(a,b){"type"!==b&&-1===e.indexOf(b)&&this.on(b,a)},this),this};q.p[a]=f[a]=function(c,d){{var e,f,g;arguments.length}if(c&&!d)d=c,c=null;else{if(e=this.getTrackEvent(c))return d=q.extend({},e,d),q.addTrackEvent(this,d),this;d.id=c}return this.data.running[a]=this.data.running[a]||[],f=this.options.defaults&&this.options.defaults[a]||{},g=q.extend({},f,d),l.call(this,i?b.call(this,g):b,g)},d&&q.extend(b,{manifest:d});var m={fn:f[a],definition:b,base:b,parents:[],name:a};return q.registry.push(q.extend(f,m,{type:a})),q.registryByName[a]=m,f},q.plugin.errors=[],q.plugin.debug="@VERSION"===q.version,q.removePlugin=function(a,b){if(!b){if(b=a,a=q.p,q.protect.natives.indexOf(b.toLowerCase())>=0)return q.error("'"+b+"' is a protected function name"),void 0;var c,d=q.registry.length;for(c=0;d>c;c++)if(q.registry[c].name===b)return q.registry.splice(c,1),delete q.registryByName[b],delete q.manifest[b],delete a[b],void 0}var e,f,g=a.data.trackEvents.byStart,h=a.data.trackEvents.byEnd,i=a.data.trackEvents.animating;for(e=0,f=g.length;f>e;e++)g[e]&&g[e]._natives&&g[e]._natives.type===b&&(g[e]._natives._teardown&&g[e]._natives._teardown.call(a,g[e]),g.splice(e,1),e--,f--,a.data.trackEvents.startIndex<=e&&(a.data.trackEvents.startIndex--,a.data.trackEvents.endIndex--)),h[e]&&h[e]._natives&&h[e]._natives.type===b&&h.splice(e,1);for(e=0,f=i.length;f>e;e++)i[e]&&i[e]._natives&&i[e]._natives.type===b&&(i.splice(e,1),e--,f--)},q.compositions={},q.compose=function(a,b,c){q.manifest[a]=c=c||b.manifest||{},q.compositions[a]=b},q.plugin.effect=q.effect=q.compose;var r=/^(?:\.|#|\[)/;q.dom={debug:!1,find:function(a,c){var d=null;if(a=a.trim(),c=c||b,a){if(!r.test(a)&&(d=b.getElementById(a),null!==d))return d;try{d=c.querySelector(a)}catch(e){if(q.dom.debug)throw new Error(e)}}return d}};var s=/\?/,t={url:"",data:"",dataType:"",success:q.nop,type:"GET",async:!0,xhr:function(){return new a.XMLHttpRequest}};q.xhr=function(a){if(a.dataType=a.dataType&&a.dataType.toLowerCase()||null,a.dataType&&("jsonp"===a.dataType||"script"===a.dataType))return q.xhr.getJSONP(a.url,a.success,"script"===a.dataType),void 0;var b=q.extend({},t,a);return b.ajax=b.xhr(),b.ajax?("GET"===b.type&&b.data&&(b.url+=(s.test(b.url)?"&":"?")+b.data,b.data=null),b.ajax.open(b.type,b.url,b.async),b.ajax.send(b.data||null),q.xhr.httpData(b)):void 0},q.xhr.httpData=function(a){var b,c,d=null,e=null;return a.ajax.onreadystatechange=function(){if(4===a.ajax.readyState){try{d=JSON.parse(a.ajax.responseText)
}catch(f){}if(b={xml:a.ajax.responseXML,text:a.ajax.responseText,json:d},!b.xml||!b.xml.documentElement){b.xml=null;try{c=new DOMParser,e=c.parseFromString(a.ajax.responseText,"text/xml"),e.getElementsByTagName("parsererror").length||(b.xml=e)}catch(f){}}a.dataType&&(b=b[a.dataType]),a.success.call(a.ajax,b)}},b},q.xhr.getJSONP=function(a,c,d){var e,f,g,h=b.head||b.getElementsByTagName("head")[0]||b.documentElement,i=b.createElement("script"),j=!1,k=[],l=/(=)\?(?=&|$)|\?\?/;d||(g=a.match(/(callback=[^&]*)/),null!==g&&g.length?(e=g[1].split("=")[1],"?"===e&&(e="jsonp"),f=q.guid(e),a=a.replace(/(callback=[^&]*)/,"callback="+f)):(f=q.guid("jsonp"),l.test(a)&&(a=a.replace(l,"$1"+f)),k=a.split(/\?(.+)?/),a=k[0]+"?",k[1]&&(a+=k[1]+"&"),a+="callback="+f),window[f]=function(a){c&&c(a),j=!0}),i.addEventListener("load",function(){d&&c&&c(),j&&delete window[f],h.removeChild(i)},!1),i.src=a,h.insertBefore(i,h.firstChild)},q.getJSONP=q.xhr.getJSONP,q.getScript=q.xhr.getScript=function(a,b){return q.xhr.getJSONP(a,b,!0)},q.util={toSeconds:function(a,b){var c,d,e,f,g,h,i=/^([0-9]+:){0,2}[0-9]+([.;][0-9]+)?$/,j="Invalid time format";return"number"==typeof a?a:("string"!=typeof a||i.test(a)||q.error(j),c=a.split(":"),d=c.length-1,e=c[d],e.indexOf(";")>-1&&(g=e.split(";"),h=0,b&&"number"==typeof b&&(h=parseFloat(g[1],10)/b),c[d]=parseInt(g[0],10)+h),f=c[0],{1:parseFloat(f,10),2:60*parseInt(f,10)+parseFloat(c[1],10),3:3600*parseInt(f,10)+60*parseInt(c[1],10)+parseFloat(c[2],10)}[c.length||1])}},q.p.cue=q.p.exec,q.protect={natives:p(q.p).map(function(a){return a.toLowerCase()})},q.forEach({listen:"on",unlisten:"off",trigger:"emit",exec:"cue"},function(a,b){var c=q.p[b];q.p[b]=function(){return"undefined"!=typeof console&&console.warn&&(console.warn("Deprecated method '"+b+"', "+(null==a?"do not use.":"use '"+a+"' instead.")),q.p[b]=c),q.p[a].apply(this,[].slice.call(arguments))}}),a.Popcorn=q}else{a.Popcorn={isSupported:!1};for(var u="byId forEach extend effects error guid sizeOf isArray nop position disable enable destroyaddTrackEvent removeTrackEvent getTrackEvents getTrackEvent getLastTrackEventId timeUpdate plugin removePlugin compose effect xhr getJSONP getScript".split(/\s+/);u.length;)a.Popcorn[u.shift()]=function(){}}}(window,window.document),function(a,b){var c=a.document,d=a.location,e=/:\/\//,f=d.href.replace(d.href.split("/").slice(-1)[0],""),g=function(a,b,c){a=a||0,b=(b||a||0)+1,c=c||1;var d=Math.ceil((b-a)/c)||0,e=0,f=[];for(f.length=d;d>e;)f[e++]=a,a+=c;return f};b.sequence=function(a,c){return new b.sequence.init(a,c)},b.sequence.init=function(a,d){this.parent=c.getElementById(a),this.seqId=b.guid("__sequenced"),this.queue=[],this.playlist=[],this.inOuts={ofVideos:[],ofClips:[]},this.dims={width:0,height:0},this.active=0,this.cycling=!1,this.playing=!1,this.times={last:0},this.events={};var g=this,h=0;return b.forEach(d,function(d,h){var i=c.createElement("video");i.preload="auto",i.controls=!0,i.style.display=h&&"none"||"",i.id=g.seqId+"-"+h,g.queue.push(i);var j=d["in"],k=d.out;g.inOuts.ofVideos.push({"in":void 0!==j&&j||1,out:void 0!==k&&k||0}),g.inOuts.ofVideos[h].out=g.inOuts.ofVideos[h].out||g.inOuts.ofVideos[h]["in"]+2,i.src=e.test(d.src)?d.src:f+d.src,i.setAttribute("data-sequence-owner",a),i.setAttribute("data-sequence-guid",g.seqId),i.setAttribute("data-sequence-id",h),i.setAttribute("data-sequence-clip",[g.inOuts.ofVideos[h]["in"],g.inOuts.ofVideos[h].out].join(":")),g.parent.appendChild(i),g.playlist.push(b("#"+i.id))}),g.inOuts.ofVideos.forEach(function(a){var b=a.out-a["in"],c={"in":h,out:h+b};g.inOuts.ofClips.push(c),h=c.out+1}),b.forEach(this.queue,function(a,c){function d(){return c||(g.dims.width=a.videoWidth,g.dims.height=a.videoHeight),a.currentTime=g.inOuts.ofVideos[c]["in"]-.5,a.removeEventListener("canplaythrough",d,!1),!0}a.addEventListener("canplaythrough",d,!1),a.addEventListener("play",function(){g.playing=!0},!1),a.addEventListener("pause",function(){g.playing=!1},!1),a.addEventListener("timeupdate",function(c){var d=c.srcElement||c.target,e=+(d.dataset&&d.dataset.sequenceId||d.getAttribute("data-sequence-id")),f=Math.floor(a.currentTime);g.times.last!==f&&e===g.active&&(g.times.last=f,f===g.inOuts.ofVideos[e].out&&b.sequence.cycle.call(g,e))},!1)}),this},b.sequence.init.prototype=b.sequence.prototype,b.sequence.cycle=function(a){this.queue||b.error("Popcorn.sequence.cycle is not a public method");var c,d,e,f,g=this.queue,h=this.inOuts.ofVideos,i=g[a],j=0;return g[a+1]&&(j=a+1),g[a+1]?(c=g[j],d=h[j],b.extend(c,{width:this.dims.width,height:this.dims.height}),e=this.playlist[j],f=this.playlist[a],i.pause(),this.active=j,this.times.last=d["in"]-1,e.currentTime(d["in"]),e[j?"play":"pause"](),this.trigger("cycle",{position:{previous:a,current:j}}),j&&(i.style.display="none",c.style.display=""),this.cycling=!1):(j=0,this.playlist[a].pause()),this};var h=["timeupdate","play","pause"];b.extend(b.sequence.prototype,{eq:function(a){return this.playlist[a]},remove:function(){this.parent.innerHTML=null},clip:function(a){return this.inOuts.ofVideos[a]},duration:function(){for(var a=0,b=this.inOuts.ofClips,c=0;c<b.length;c++)a+=b[c].out-b[c]["in"]+1;return a-1},play:function(){return this.playlist[this.active].play(),this},exec:function(a,c){var d=this.active;return this.inOuts.ofClips.forEach(function(b,c){a>=b["in"]&&a<=b.out&&(d=c)}),a+=this.inOuts.ofVideos[d]["in"]-this.inOuts.ofClips[d]["in"],b.addTrackEvent(this.playlist[d],{start:a-1,end:a,_running:!1,_natives:{start:c||b.nop,end:b.nop,type:"exec"}}),this},listen:function(a,c){var d,e=this,f=this.playlist,g=f.length,i=0;return c||(c=b.nop),b.Events.Natives.indexOf(a)>-1?b.forEach(f,function(b){b.listen(a,function(d){d.active=e,h.indexOf(a)>-1?c.call(b,d):++i===g&&c.call(b,d)})}):(this.events[a]||(this.events[a]={}),d=c.name||b.guid("__"+a),this.events[a][d]=c),this},unlisten:function(){},trigger:function(a,c){var d=this;if(!(b.Events.Natives.indexOf(a)>-1))return this.events[a]&&b.forEach(this.events[a],function(b){b.call(d,{type:a},c)}),this}}),b.forEach(b.manifest,function(a,c){b.sequence.prototype[c]=function(a){var d,e,f,h,i,j,k,l,m,n={},o=[];for(d=0;d<this.inOuts.ofClips.length;d++)e=this.inOuts.ofClips[d],f=g(e["in"],e.out),h=f.indexOf(a.start),i=f.indexOf(a.end),h>-1&&(n[d]=b.extend({},e,{start:f[h],clipIdx:h})),i>-1&&(n[d]=b.extend({},e,{end:f[i],clipIdx:i}));for(j=Object.keys(n).map(function(a){return+a}),o=g(j[0],j[1]),d=0;d<o.length;d++){var p={},q=o[d],r=n[q];r?(k=this.inOuts.ofVideos[q],l=r.clipIdx,m=g(k["in"],k.out),r.start&&(p.start=m[l],p.end=m[m.length-1]),r.end&&(p.start=m[0],p.end=m[l])):(p.start=this.inOuts.ofVideos[q]["in"],p.end=this.inOuts.ofVideos[q].out),this.playlist[q][c](b.extend({},a,p))}return this}})}(this,Popcorn),function(a){document.addEventListener("DOMContentLoaded",function(){var b="data-timeline-sources",c=document.querySelectorAll("["+b+"]");a.forEach(c,function(d,e){var f,g,h,i=c[e];i.id||(i.id=a.guid("__popcorn")),i.nodeType&&1===i.nodeType&&(h=a("#"+i.id),f=(i.getAttribute(b)||"").split(","),f[0]&&a.forEach(f,function(a){g=a.split("!"),1===g.length&&(g=a.match(/(.*)[\/\\]([^\/\\]+\.\w+)$/)[2].split("."),g[0]="parse"+g[1].toUpperCase(),g[1]=a),f[0]&&h[g[0]]&&h[g[0]](g[1])}),h.autoplay()&&h.play())})},!1)}(Popcorn),function(a,b){function c(a){var b="string"==typeof a?a:[a.language,a.region].join("-"),c=b.split("-");return{iso6391:b,language:c[0]||"",region:c[1]||""}}var d=a.navigator,e=c(d.userLanguage||d.language);b.locale={get:function(){return e},set:function(a){return e=c(a),b.locale.broadcast(),e},broadcast:function(a){var c,d=b.instances,e=d.length,f=0;for(a=a||"locale:changed";e>f;f++)c=d[f],a in c.data.events&&c.trigger(a)}}}(this,this.Popcorn),function(a){{var b=Array.prototype,c=Object.prototype,d=(b.forEach,b.slice,c.hasOwnProperty);c.toString}a.parsers={},a.parser=function(b,c,e){if(a.protect.natives.indexOf(b.toLowerCase())>=0)return a.error("'"+b+"' is a protected function name"),void 0;if("function"!=typeof c||e||(e=c,c=""),"function"==typeof e&&"string"==typeof c){var f,g=(a.events.all,{});return f=function(b,f){if(!b)return this;var g=this;return a.xhr({url:b,dataType:c,success:function(a){var b,c,h,i=e(a),j=0;if(b=i.data||[],c=b.length,h=null,c){for(;c>j;j++){h=b[j];for(var k in h)d.call(h,k)&&g[k]&&g[k](h[k])}f&&f()}}}),this},g[b]=f,a.extend(a.p,g),g}}}(Popcorn),function(a){var b=function(b,c){return b=b||a.nop,c=c||a.nop,function(){b.apply(this,arguments),c.apply(this,arguments)}},c="ogg|oga|aac|mp3|wav",d="ogg|ogv|mp4|webm",e=c+"|"+d,f=new RegExp("^.*\\.("+c+")($|\\?)"),g=new RegExp("^.*\\.("+e+")($|\\?)");a.player=function(c,d){if(!a[c]){d=d||{};var e=function(c,e,f){f=f||{};var g,h,i=new Date/1e3,j=i,k=0,l=0,m=1,n=!1,o={},p="string"==typeof c?a.dom.find(c):c,q={};Object.prototype.__defineGetter__||(q=p||document.createElement("div"));for(var r in p)r in q||("object"==typeof p[r]?q[r]=p[r]:"function"==typeof p[r]?q[r]=function(a){return"length"in p[a]&&!p[a].call?p[a]:function(){return p[a].apply(p,arguments)}}(r):a.player.defineProperty(q,r,{get:function(a){return function(){return p[a]}}(r),set:a.nop,configurable:!0}));var s=function(){i=new Date/1e3,q.paused||(q.currentTime=q.currentTime+(i-j),q.dispatchEvent("timeupdate"),g=setTimeout(s,10)),j=i};return q.play=function(){this.paused=!1,q.readyState>=4&&(j=new Date/1e3,q.dispatchEvent("play"),s())},q.pause=function(){this.paused=!0,q.dispatchEvent("pause")},a.player.defineProperty(q,"currentTime",{get:function(){return k},set:function(a){return k=+a,q.dispatchEvent("timeupdate"),k},configurable:!0}),a.player.defineProperty(q,"volume",{get:function(){return m},set:function(a){return m=+a,q.dispatchEvent("volumechange"),m},configurable:!0}),a.player.defineProperty(q,"muted",{get:function(){return n},set:function(a){return n=+a,q.dispatchEvent("volumechange"),n},configurable:!0}),a.player.defineProperty(q,"readyState",{get:function(){return l},set:function(a){return l=a},configurable:!0}),q.addEventListener=function(a,b){return o[a]||(o[a]=[]),o[a].push(b),b},q.removeEventListener=function(a,b){var c,d=o[a];if(d){for(c=o[a].length-1;c>=0;c--)b===d[c]&&d.splice(c,1);return b}},q.dispatchEvent=function(b){var c,d,e=this,f=b.type;if(f||(f=b,d=a.events.getInterface(f),d&&(c=document.createEvent(d),c.initEvent(f,!0,!0,window,1))),o[f])for(var g=o[f].length-1;g>=0;g--)o[f][g].call(e,c,e)},q.src=e||"",q.duration=0,q.paused=!0,q.ended=0,f&&f.events&&a.forEach(f.events,function(a,b){q.addEventListener(b,a,!1)}),d._canPlayType(p.nodeName,e)!==!1?d._setup?d._setup.call(q,f):(q.readyState=4,q.dispatchEvent("loadedmetadata"),q.dispatchEvent("loadeddata"),q.dispatchEvent("canplaythrough")):setTimeout(function(){q.dispatchEvent("error")},0),h=new a.p.init(q,f),d._teardown&&(h.destroy=b(h.destroy,function(){d._teardown.call(q,f)})),h};e.canPlayType=d._canPlayType=d._canPlayType||a.nop,a[c]=a.player.registry[c]=e}},a.player.registry={},a.player.defineProperty=Object.defineProperty||function(b,c,d){b.__defineGetter__(c,d.get||a.nop),b.__defineSetter__(c,d.set||a.nop)},a.player.playerQueue=function(){var a=[],b=!1;return{next:function(){b=!1,a.shift(),a[0]&&a[0]()},add:function(c){a.push(function(){b=!0,c&&c()}),!b&&a[0]()}}},a.smart=function(b,c,d){var e,h,i,j=["AUDIO","VIDEO"],k=a.dom.find(b),l=document.createElement("video"),m={ogg:"video/ogg",ogv:"video/ogg",oga:"audio/ogg",webm:"video/webm",mp4:"video/mp4",mp3:"audio/mp3"},n=function(a){return l.canPlayType(m[a])},o=function(a){return i=g.exec(a),i&&i[1]?n(i[1]):!1};if(!k)return a.error("Specified target "+b+" was not found."),void 0;if(j.indexOf(k.nodeName)>-1&&!c)return"object"==typeof c&&(d=c,c=void 0),a(k,d);for("string"==typeof c&&(c=[c]),h=0,srcLength=c.length;srcLength>h;h++){if(o(c[h])){c=c[h];break}for(var p in a.player.registry)if(a.player.registry.hasOwnProperty(p)&&a.player.registry[p].canPlayType(k.nodeName,c[h]))return a[p](k,c[h],d)}return-1===j.indexOf(k.nodeName)&&(e="string"==typeof c?c:c.length?c[0]:c,b=document.createElement(f.exec(e)?j[0]:j[1]),b.controls=!0,k.appendChild(b),k=b),d&&d.events&&d.events.error&&k.addEventListener("error",d.events.error,!1),k.src=c,a(k,d)}}(Popcorn),function(a){var b,c="http://popcornjs.org/code/modules/player/popcorn.player.js",d=/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(youtu|vimeo|soundcloud|baseplayer)/,e={},f={vimeo:!1,youtube:!1,soundcloud:!1,module:!1};Object.defineProperty(e,b,{get:function(){return f[b]},set:function(a){f[b]=a}}),a.plugin("mediaspawner",{manifest:{about:{name:"Popcorn Media Spawner Plugin",version:"0.1",author:"Matthew Schranz, @mjschranz",website:"mschranz.wordpress.com"},options:{source:{elem:"input",type:"text",label:"Media Source","default":"http://www.youtube.com/watch?v=CXDstfD9eJ0"},caption:{elem:"input",type:"text",label:"Media Caption","default":"Popcorn Popping",optional:!0},target:"mediaspawner-container",start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},autoplay:{elem:"input",type:"checkbox",label:"Autoplay Video",optional:!0},width:{elem:"input",type:"number",label:"Media Width","default":400,units:"px",optional:!0},height:{elem:"input",type:"number",label:"Media Height","default":200,units:"px",optional:!0}}},_setup:function(b){function f(){function c(){"HTML5"===h||window.Popcorn[h]?(b.id=b._container.id,b._container.style.width=b.width+"px",b._container.style.height=b.height+"px",b.popcorn=a.smart("#"+b.id,b.source),"HTML5"===h&&b.popcorn.controls(!0),b._container.style.width="0px",b._container.style.height="0px",b._container.style.visibility="hidden",b._container.style.overflow="hidden"):setTimeout(function(){c()},300)}"HTML5"===h||window.Popcorn[h]||e[h]?c():(e[h]=!0,a.getScript("http://popcornjs.org/code/players/"+h+"/popcorn."+h+".js",function(){c()}))}function g(){window.Popcorn.player?f():setTimeout(function(){g()},300)}var h,i,j,k,l=document.getElementById(b.target)||{};k=d.exec(b.source),k?(h=k[1],"youtu"===h&&(h="youtube")):h="HTML5",b._type=h,b._container=document.createElement("div"),i=b._container,i.id="mediaSpawnerdiv-"+a.guid(),b.width=b.width||400,b.height=b.height||200,b.caption&&(j=document.createElement("div"),j.innerHTML=b.caption,j.style.display="none",b._capCont=j,i.appendChild(j)),l&&l.appendChild(i),window.Popcorn.player||e.module?g():(e.module=!0,a.getScript(c,g))},start:function(a,b){b._capCont&&(b._capCont.style.display=""),b._container.style.width=b.width+"px",b._container.style.height=b.height+"px",b._container.style.visibility="visible",b._container.style.overflow="visible",b.autoplay&&b.popcorn.play()},end:function(a,b){b._capCont&&(b._capCont.style.display="none"),b._container.style.width="0px",b._container.style.height="0px",b._container.style.visibility="hidden",b._container.style.overflow="hidden",b.popcorn.pause()},_teardown:function(a){a.popcorn&&a.popcorn.destory&&a.popcorn.destroy(),document.getElementById(a.target)&&document.getElementById(a.target).removeChild(a._container)}})}(Popcorn,this),function(a){a.plugin("code",function(b){var c=!1,d=this,e=function(){var a=function(a){return function(b,e){var f=function(){c&&b.call(d,e),c&&a(f)};f()}};return window.webkitRequestAnimationFrame?a(window.webkitRequestAnimationFrame):window.mozRequestAnimationFrame?a(window.mozRequestAnimationFrame):a(function(a){window.setTimeout(a,16)})}();return b.onStart&&"function"==typeof b.onStart||(b.onStart=a.nop),b.onEnd&&"function"!=typeof b.onEnd&&(b.onEnd=void 0),b.onFrame&&"function"!=typeof b.onFrame&&(b.onFrame=void 0),{start:function(a,b){b.onStart.call(d,b),b.onFrame&&(c=!0,e(b.onFrame,b))},end:function(a,b){b.onFrame&&(c=!1),b.onEnd&&b.onEnd.call(d,b)}}},{about:{name:"Popcorn Code Plugin",version:"0.1",author:"David Humphrey (@humphd)",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},onStart:{elem:"input",type:"function",label:"onStart"},onFrame:{elem:"input",type:"function",label:"onFrame",optional:!0},onEnd:{elem:"input",type:"function",label:"onEnd"}}})}(Popcorn),function(a){var b=0;a.plugin("flickr",function(c){var d,e,f,g,h,i=document.getElementById(c.target),j=c.numberofimages||4,k=c.height||"50px",l=c.width||"50px",m=c.padding||"5px",n=c.border||"0px";d=document.createElement("div"),d.id="flickr"+b,d.style.width="100%",d.style.height="100%",d.style.display="none",b++,i&&i.appendChild(d);var o=function(){e?setTimeout(function(){o()},5):(f="http://api.flickr.com/services/rest/?method=flickr.people.findByUsername&",f+="username="+c.username+"&api_key="+c.apikey+"&format=json&jsoncallback=flickr",a.getJSONP(f,function(a){e=a.user.nsid,p()}))},p=function(){f="http://api.flickr.com/services/feeds/photos_public.gne?",e&&(f+="id="+e+"&"),c.tags&&(f+="tags="+c.tags+"&"),f+="lang=en-us&format=json&jsoncallback=flickr",a.xhr.getJSONP(f,function(b){var c=document.createElement("div");c.innerHTML="<p style='padding:"+m+";'>"+b.title+"<p/>",a.forEach(b.items,function(a,b){return j>b?(g=document.createElement("a"),g.setAttribute("href",a.link),g.setAttribute("target","_blank"),h=document.createElement("img"),h.setAttribute("src",a.media.m),h.setAttribute("height",k),h.setAttribute("width",l),h.setAttribute("style","border:"+n+";padding:"+m),g.appendChild(h),c.appendChild(g),void 0):!1}),d.appendChild(c)})};return c.username&&c.apikey?o():(e=c.userid,p()),{start:function(){d.style.display="inline"},end:function(){d.style.display="none"},_teardown:function(a){document.getElementById(a.target)&&document.getElementById(a.target).removeChild(d)}}},{about:{name:"Popcorn Flickr Plugin",version:"0.2",author:"Scott Downe, Steven Weerdenburg, Annasob",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},userid:{elem:"input",type:"text",label:"User ID",optional:!0},tags:{elem:"input",type:"text",label:"Tags"},username:{elem:"input",type:"text",label:"Username",optional:!0},apikey:{elem:"input",type:"text",label:"API Key",optional:!0},target:"flickr-container",height:{elem:"input",type:"text",label:"Height","default":"50px",optional:!0},width:{elem:"input",type:"text",label:"Width","default":"50px",optional:!0},padding:{elem:"input",type:"text",label:"Padding",optional:!0},border:{elem:"input",type:"text",label:"Border","default":"5px",optional:!0},numberofimages:{elem:"input",type:"number","default":4,label:"Number of Images"}}})}(Popcorn),function(a){a.plugin("footnote",{manifest:{about:{name:"Popcorn Footnote Plugin",version:"0.2",author:"@annasob, @rwaldron",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},text:{elem:"input",type:"text",label:"Text"},target:"footnote-container"}},_setup:function(b){var c=a.dom.find(b.target);b._container=document.createElement("div"),b._container.style.display="none",b._container.innerHTML=b.text,c.appendChild(b._container)},start:function(a,b){b._container.style.display="inline"},end:function(a,b){b._container.style.display="none"},_teardown:function(b){var c=a.dom.find(b.target);c&&c.removeChild(b._container)}})}(Popcorn),function(a){function b(a){return String(a).replace(/&(?!\w+;)|[<>"']/g,function(a){return e[a]||a})}function c(a){return a.replace(/\r?\n/gm,"<br>")}function d(a,b){var c=a.container=document.createElement("div"),d=c.style,e=a.media,f=function(){var b=a.position();d.fontSize="18px",d.width=e.offsetWidth+"px",d.top=b.top+e.offsetHeight-c.offsetHeight-40+"px",d.left=b.left+"px",setTimeout(f,10)};return c.id=b||"",d.position="absolute",d.color="white",d.textShadow="black 2px 2px 6px",d.fontWeight="bold",d.textAlign="center",f(),a.media.parentNode.appendChild(c),c}var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};a.plugin("text",{manifest:{about:{name:"Popcorn Text Plugin",version:"0.1",author:"@humphd"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},text:{elem:"input",type:"text",label:"Text","default":"Popcorn.js"},escape:{elem:"input",type:"checkbox",label:"Escape"},multiline:{elem:"input",type:"checkbox",label:"Multiline"}}},_setup:function(e){var f,g,h=e._container=document.createElement("div");h.style.display="none",e.target?(f=a.dom.find(e.target),f?["VIDEO","AUDIO"].indexOf(f.nodeName)>-1&&(f=d(this,e.target+"-overlay")):f=d(this,e.target)):f=this.container?this.container:d(this),e._target=f,g=e.escape?b(e.text):e.text,g=e.multiline?c(g):g,h.innerHTML=g||"",f.appendChild(h)},start:function(a,b){b._container.style.display="inline"},end:function(a,b){b._container.style.display="none"},_teardown:function(a){var b=a._target;b&&b.removeChild(a._container)}})}(Popcorn);var googleCallback;!function(a){function b(a,b,c){var d,e=a.type?a.type.toUpperCase():"HYBRID";("STAMEN-WATERCOLOR"===e||"STAMEN-TERRAIN"===e||"STAMEN-TONER"===e)&&(d=e.replace("STAMEN-","").toLowerCase());var f=new google.maps.Map(c,{mapTypeId:d?d:google.maps.MapTypeId[e],mapTypeControlOptions:{mapTypeIds:[]}});return d&&f.mapTypes.set(d,new google.maps.StamenMapType(d)),f.getDiv().style.display="none",f}var c,d,e=1,f=!1,g=!1;googleCallback=function(b){"undefined"!=typeof google&&google.maps&&google.maps.Geocoder&&google.maps.LatLng?(c=new google.maps.Geocoder,a.getScript("//maps.stamen.com/js/tile.stamen.js",function(){g=!0})):setTimeout(function(){googleCallback(b)},1)},d=function(){document.body?(f=!0,a.getScript("//maps.google.com/maps/api/js?sensor=false&callback=googleCallback")):setTimeout(function(){d()},1)},a.plugin("googlemap",function(a){var h,i,j,k=document.getElementById(a.target);a.type=a.type||"ROADMAP",a.zoom=a.zoom||1,a.lat=a.lat||0,a.lng=a.lng||0,f||d(),h=document.createElement("div"),h.id="actualmap"+e,h.style.width=a.width||"100%",h.style.height=a.height?a.height:k&&k.clientHeight?k.clientHeight+"px":"100%",e++,k&&k.appendChild(h);var l=function(){g?h&&(a.location?c.geocode({address:a.location},function(c,d){h&&d===google.maps.GeocoderStatus.OK&&(a.lat=c[0].geometry.location.lat(),a.lng=c[0].geometry.location.lng(),j=new google.maps.LatLng(a.lat,a.lng),i=b(a,j,h))}):(j=new google.maps.LatLng(a.lat,a.lng),i=b(a,j,h))):setTimeout(function(){l()},5)};return l(),{start:function(a,b){var c,d=this,e=function(){if(i){if(b._map=i,i.getDiv().style.display="block",google.maps.event.trigger(i,"resize"),i.setCenter(j),b.zoom&&"number"!=typeof b.zoom&&(b.zoom=+b.zoom),i.setZoom(b.zoom),b.heading&&"number"!=typeof b.heading&&(b.heading=+b.heading),b.pitch&&"number"!=typeof b.pitch&&(b.pitch=+b.pitch),"STREETVIEW"===b.type){i.setStreetView(c=new google.maps.StreetViewPanorama(h,{position:j,pov:{heading:b.heading=b.heading||0,pitch:b.pitch=b.pitch||0,zoom:b.zoom}}));var a=function(c,e){var h=google.maps.geometry.spherical.computeHeading;setTimeout(function(){var e=d.media.currentTime;if("object"==typeof b.tween){for(var i=0,j=c.length;j>i;i++){var k=c[i];e>=k.interval*(i+1)/1e3&&(e<=k.interval*(i+2)/1e3||e>=k.interval*j/1e3)&&(o.setPosition(new google.maps.LatLng(k.position.lat,k.position.lng)),o.setPov({heading:k.pov.heading||h(k,c[i+1])||0,zoom:k.pov.zoom||0,pitch:k.pov.pitch||0}))}a(c,c[0].interval)}else{for(var l=0,m=c.length;m>l;l++){var n=b.interval;e>=n*(l+1)/1e3&&(n*(l+2)/1e3>=e||e>=n*m/1e3)&&(f.setPov({heading:h(c[l],c[l+1])||0,zoom:b.zoom,pitch:b.pitch||0}),f.setPosition(g[l]))}a(g,b.interval)}},e)};if(b.location&&"string"==typeof b.tween){var f=c,g=[],k=new google.maps.DirectionsService,l=new google.maps.DirectionsRenderer(f),m={origin:b.location,destination:b.tween,travelMode:google.maps.TravelMode.DRIVING};k.route(m,function(a,b){b==google.maps.DirectionsStatus.OK&&(l.setDirections(a),n(a,d))});var n=function(c){for(var d=c.routes[0].overview_path,e=0,f=d.length;f>e;e++)g.push(new google.maps.LatLng(d[e].lat(),d[e].lng()));b.interval=b.interval||1e3,a(g,10)}}else if("object"==typeof b.tween)for(var o=c,p=0,q=b.tween.length;q>p;p++)b.tween[p].interval=b.tween[p].interval||1e3,a(b.tween,10)}b.onmaploaded&&b.onmaploaded(b,i)}else setTimeout(function(){e()},13)};e()},end:function(){i&&(i.getDiv().style.display="none")},_teardown:function(a){var b=document.getElementById(a.target);b&&b.removeChild(h),h=i=j=null,a._map=null}}},{about:{name:"Popcorn Google Map Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"start",label:"Start"},end:{elem:"input",type:"start",label:"End"},target:"map-container",type:{elem:"select",options:["ROADMAP","SATELLITE","STREETVIEW","HYBRID","TERRAIN","STAMEN-WATERCOLOR","STAMEN-TERRAIN","STAMEN-TONER"],label:"Map Type",optional:!0},zoom:{elem:"input",type:"text",label:"Zoom","default":0,optional:!0},lat:{elem:"input",type:"text",label:"Lat",optional:!0},lng:{elem:"input",type:"text",label:"Lng",optional:!0},location:{elem:"input",type:"text",label:"Location","default":"Toronto, Ontario, Canada"},heading:{elem:"input",type:"text",label:"Heading","default":0,optional:!0},pitch:{elem:"input",type:"text",label:"Pitch","default":1,optional:!0}}})}(Popcorn),function(a){function b(a){function b(){var b=a.getBoundingClientRect(),c=f.getBoundingClientRect();c.left!==b.left&&(f.style.left=b.left+"px"),c.top!==b.top&&(f.style.top=b.top+"px")}var e=-1,f=document.createElement("div"),g=getComputedStyle(a).zIndex;return f.setAttribute("data-popcorn-helper-container",!0),f.style.position="absolute",f.style.zIndex=isNaN(g)?c:g+1,document.body.appendChild(f),{element:f,start:function(){e=setInterval(b,d)},stop:function(){clearInterval(e),e=-1},destroy:function(){document.body.removeChild(f),-1!==e&&clearInterval(e)}}}var c=2e3,d=10;a.plugin("image",{manifest:{about:{name:"Popcorn image Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"url",label:"Image URL","default":"http://mozillapopcorn.org/wp-content/themes/popcorn/images/for_developers.png"},href:{elem:"input",type:"url",label:"Link","default":"http://mozillapopcorn.org/wp-content/themes/popcorn/images/for_developers.png",optional:!0},target:"image-container",text:{elem:"input",type:"text",label:"Caption","default":"Popcorn.js",optional:!0}}},_setup:function(c){var d=document.createElement("img"),e=document.getElementById(c.target);c.anchor=document.createElement("a"),c.anchor.style.position="relative",c.anchor.style.textDecoration="none",c.anchor.style.display="none",e&&(["VIDEO","AUDIO"].indexOf(e.nodeName)>-1?(c.trackedContainer=b(e),c.trackedContainer.element.appendChild(c.anchor)):e&&e.appendChild(c.anchor)),d.addEventListener("load",function(){d.style.borderStyle="none",c.anchor.href=c.href||c.src||"#",c.anchor.target="_blank";var b,f;d.style.height=e.style.height,d.style.width=e.style.width,c.anchor.appendChild(d),c.text&&(b=d.height/12+"px",f=document.createElement("div"),a.extend(f.style,{color:"black",fontSize:b,fontWeight:"bold",position:"relative",textAlign:"center",width:d.style.width||d.width+"px",zIndex:"10"}),f.innerHTML=c.text||"",f.style.top=(d.style.height.replace("px","")||d.height)/2-f.offsetHeight/2+"px",c.anchor.insertBefore(f,d))},!1),d.src=c.src},start:function(a,b){b.anchor.style.display="inline",b.trackedContainer&&b.trackedContainer.start()},end:function(a,b){b.anchor.style.display="none",b.trackedContainer&&b.trackedContainer.stop()},_teardown:function(a){a.trackedContainer?a.trackedContainer.destroy():a.anchor.parentNode&&a.anchor.parentNode.removeChild(a.anchor)}})}(Popcorn),function(a){var b=1,c=!1;a.plugin("googlefeed",function(d){var e=function(){var b=!1,d=0,e=document.getElementsByTagName("link"),f=e.length,g=document.head||document.getElementsByTagName("head")[0],h=document.createElement("link"),i="//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.";for(window.GFdynamicFeedControl?c=!0:a.getScript(i+"js",function(){c=!0});f>d;d++)e[d].href===i+"css"&&(b=!0);b||(h.type="text/css",h.rel="stylesheet",h.href=i+"css",g.insertBefore(h,g.firstChild))};window.google?e():a.getScript("//www.google.com/jsapi",function(){google.load("feeds","1",{callback:function(){e()}})});var f=document.createElement("div"),g=document.getElementById(d.target),h=function(){c?d.feed=new GFdynamicFeedControl(d.url,f,{vertical:"vertical"===d.orientation.toLowerCase()?!0:!1,horizontal:"horizontal"===d.orientation.toLowerCase()?!0:!1,title:d.title=d.title||"Blog"}):setTimeout(function(){h()},5)};return(!d.orientation||"vertical"!==d.orientation.toLowerCase()&&"horizontal"!==d.orientation.toLowerCase())&&(d.orientation="vertical"),f.style.display="none",f.id="_feed"+b,f.style.width="100%",f.style.height="100%",b++,g&&g.appendChild(f),h(),{start:function(){f.setAttribute("style","display:inline")},end:function(){f.setAttribute("style","display:none")},_teardown:function(a){document.getElementById(a.target)&&document.getElementById(a.target).removeChild(f),delete a.feed}}},{about:{name:"Popcorn Google Feed Plugin",version:"0.1",author:"David Seifried",website:"dseifried.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"feed-container",url:{elem:"input",type:"url",label:"Feed URL","default":"http://planet.mozilla.org/rss20.xml"},title:{elem:"input",type:"text",label:"Title","default":"Planet Mozilla",optional:!0},orientation:{elem:"select",options:["Vertical","Horizontal"],label:"Orientation","default":"Vertical",optional:!0}}})}(Popcorn),function(a){var b=0,c=function(b,c){var d=b.container=document.createElement("div"),e=d.style,f=b.media,g=function(){var a=b.position();e.fontSize="18px",e.width=f.offsetWidth+"px",e.top=a.top+f.offsetHeight-d.offsetHeight-40+"px",e.left=a.left+"px",setTimeout(g,10)};return d.id=c||a.guid(),e.position="absolute",e.color="white",e.textShadow="black 2px 2px 6px",e.fontWeight="bold",e.textAlign="center",g(),b.media.parentNode.appendChild(d),d};a.plugin("subtitle",{manifest:{about:{name:"Popcorn Subtitle Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"text",label:"Start"},end:{elem:"input",type:"text",label:"End"},target:"subtitle-container",text:{elem:"input",type:"text",label:"Text"}}},_setup:function(a){var d=document.createElement("div");d.id="subtitle-"+b++,d.style.display="none",!this.container&&(!a.target||"subtitle-container"===a.target)&&c(this),a.container=a.target&&"subtitle-container"!==a.target?document.getElementById(a.target)||c(this,a.target):this.container,document.getElementById(a.container.id)&&document.getElementById(a.container.id).appendChild(d),a.innerContainer=d,a.showSubtitle=function(){a.innerContainer.innerHTML=a.text||""}},start:function(a,b){b.innerContainer.style.display="inline",b.showSubtitle(b,b.text)},end:function(a,b){b.innerContainer.style.display="none",b.innerContainer.innerHTML=""},_teardown:function(a){a.container.removeChild(a.innerContainer)}})}(Popcorn),function(a){var b=!1;a.plugin("twitter",{manifest:{about:{name:"Popcorn Twitter Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"text",label:"Tweet Source (# or @)","default":"@popcornjs"},target:"twitter-container",height:{elem:"input",type:"number",label:"Height","default":"200",optional:!0},width:{elem:"input",type:"number",label:"Width","default":"250",optional:!0}}},_setup:function(c){window.TWTR||b||(b=!0,a.getScript("//widgets.twimg.com/j/2/widget.js"));var d=document.getElementById(c.target);c.container=document.createElement("div"),c.container.setAttribute("id",a.guid()),c.container.style.display="none",d&&d.appendChild(c.container);var e=c.src||"",f=c.width||250,g=c.height||200,h=/^@/.test(e),i={version:2,id:c.container.getAttribute("id"),rpp:30,width:f,height:g,interval:6e3,theme:{shell:{background:"#ffffff",color:"#000000"},tweets:{background:"#ffffff",color:"#444444",links:"#1985b5"}},features:{loop:!0,timestamp:!0,avatars:!0,hashtags:!0,toptweets:!0,live:!0,scrollbar:!1,behavior:"default"}},j=function(a){window.TWTR?h?(i.type="profile",new TWTR.Widget(i).render().setUser(e).start()):(i.type="search",i.search=e,i.subject=e,new TWTR.Widget(i).render().start()):setTimeout(function(){j(a)
},1)};j(this)},start:function(a,b){b.container.style.display="inline"},end:function(a,b){b.container.style.display="none"},_teardown:function(a){document.getElementById(a.target)&&document.getElementById(a.target).removeChild(a.container)}})}(Popcorn),function(a){a.plugin("webpage",{manifest:{about:{name:"Popcorn Webpage Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{id:{elem:"input",type:"text",label:"Id",optional:!0},start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"url",label:"Webpage URL","default":"http://mozillapopcorn.org"},target:"iframe-container"}},_setup:function(a){var b=document.getElementById(a.target);a.src=a.src.replace(/^(https?:)?(\/\/)?/,"//"),a._iframe=document.createElement("iframe"),a._iframe.setAttribute("width","100%"),a._iframe.setAttribute("height","100%"),a._iframe.id=a.id,a._iframe.src=a.src,a._iframe.style.display="none",b&&b.appendChild(a._iframe)},start:function(a,b){b._iframe.src=b.src,b._iframe.style.display="inline"},end:function(a,b){b._iframe.style.display="none"},_teardown:function(a){document.getElementById(a.target)&&document.getElementById(a.target).removeChild(a._iframe)}})}(Popcorn);var wikiCallback;!function(a){a.plugin("wikipedia",{manifest:{about:{name:"Popcorn Wikipedia Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},lang:{elem:"input",type:"text",label:"Language","default":"english",optional:!0},src:{elem:"input",type:"url",label:"Wikipedia URL","default":"http://en.wikipedia.org/wiki/Cat"},title:{elem:"input",type:"text",label:"Title","default":"Cats",optional:!0},numberofwords:{elem:"input",type:"number",label:"Number of Words","default":"200",optional:!0},target:"wikipedia-container"}},_setup:function(b){var c,d=a.guid();b.lang||(b.lang="en"),b.numberofwords=b.numberofwords||200,window["wikiCallback"+d]=function(a){b._link=document.createElement("a"),b._link.setAttribute("href",b.src),b._link.setAttribute("target","_blank"),b._link.innerHTML=b.title||a.parse.displaytitle,b._desc=document.createElement("p"),c=a.parse.text["*"].substr(a.parse.text["*"].indexOf("<p>")),c=c.replace(/((<(.|\n)+?>)|(\((.*?)\) )|(\[(.*?)\]))/g,""),c=c.split(" "),b._desc.innerHTML=c.slice(0,c.length>=b.numberofwords?b.numberofwords:c.length).join(" ")+" ...",b._fired=!0},b.src&&a.getScript("//"+b.lang+".wikipedia.org/w/api.php?action=parse&props=text&redirects&page="+b.src.slice(b.src.lastIndexOf("/")+1)+"&format=json&callback=wikiCallback"+d)},start:function(a,b){var c=function(){b._fired?b._link&&b._desc&&document.getElementById(b.target)&&(document.getElementById(b.target).appendChild(b._link),document.getElementById(b.target).appendChild(b._desc),b._added=!0):setTimeout(function(){c()},13)};c()},end:function(a,b){b._added&&(document.getElementById(b.target).removeChild(b._link),document.getElementById(b.target).removeChild(b._desc))},_teardown:function(a){a._added&&(a._link.parentNode&&document.getElementById(a.target).removeChild(a._link),a._desc.parentNode&&document.getElementById(a.target).removeChild(a._desc),delete a.target)}})}(Popcorn),function(a){a.plugin("mustache",function(b){var c,d,e,f;a.getScript("http://mustache.github.com/extras/mustache.js");var g=!!b.dynamic,h=typeof b.template,i=typeof b.data,j=document.getElementById(b.target);return b.container=j||document.createElement("div"),"function"===h?g?e=b.template:f=b.template(b):f="string"===h?b.template:"","function"===i?g?c=b.data:d=b.data(b):d="string"===i?JSON.parse(b.data):"object"===i?b.data:"",{start:function(a,b){var g=function(){if(window.Mustache){c&&(d=c(b)),e&&(f=e(b));var a=Mustache.to_html(f,d).replace(/^\s*/gm,"");b.container.innerHTML=a}else setTimeout(function(){g()},10)};g()},end:function(a,b){b.container.innerHTML=""},_teardown:function(){c=d=e=f=null}}},{about:{name:"Popcorn Mustache Plugin",version:"0.1",author:"David Humphrey (@humphd)",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"mustache-container",template:{elem:"input",type:"text",label:"Template"},data:{elem:"input",type:"text",label:"Data"},dynamic:{elem:"input",type:"checkbox",label:"Dynamic","default":!0}}})}(Popcorn),function(a){function b(a,c){return a.map?(a.map.div.style.display=c,void 0):(setTimeout(function(){b(a,c)},10),void 0)}var c=1;a.plugin("openmap",function(d){var e,f,g,h,i,j,k,l,m=document.getElementById(d.target);return e=document.createElement("div"),e.id="openmapdiv"+c,e.style.width="100%",e.style.height="100%",c++,m&&m.appendChild(e),l=function(){if(window.OpenLayers&&window.OpenLayers.Layer.Stamen){switch(d.location?(location=new OpenLayers.LonLat(0,0),a.getJSONP("//tinygeocoder.com/create-api.php?q="+d.location+"&callback=jsonp",function(a){f=new OpenLayers.LonLat(a[1],a[0])})):f=new OpenLayers.LonLat(d.lng,d.lat),d.type=d.type||"ROADMAP",d.type){case"SATELLITE":d.map=new OpenLayers.Map({div:e,maxResolution:.28125,tileSize:new OpenLayers.Size(512,512)});var b=new OpenLayers.Layer.WorldWind("LANDSAT","//worldwind25.arc.nasa.gov/tile/tile.aspx",2.25,4,{T:"105"});d.map.addLayer(b),h=new OpenLayers.Projection("EPSG:4326"),g=new OpenLayers.Projection("EPSG:4326");break;case"TERRAIN":h=new OpenLayers.Projection("EPSG:4326"),g=new OpenLayers.Projection("EPSG:4326"),d.map=new OpenLayers.Map({div:e,projection:g});var c=new OpenLayers.Layer.WMS("USGS Terraserver","//terraserver-usa.org/ogcmap.ashx?",{layers:"DRG"});d.map.addLayer(c);break;case"STAMEN-TONER":case"STAMEN-WATERCOLOR":case"STAMEN-TERRAIN":var i=d.type.replace("STAMEN-","").toLowerCase(),j=new OpenLayers.Layer.Stamen(i);h=new OpenLayers.Projection("EPSG:4326"),g=new OpenLayers.Projection("EPSG:900913"),f=f.transform(h,g),d.map=new OpenLayers.Map({div:e,projection:g,displayProjection:h,controls:[new OpenLayers.Control.Navigation,new OpenLayers.Control.PanPanel,new OpenLayers.Control.ZoomPanel]}),d.map.addLayer(j);break;default:g=new OpenLayers.Projection("EPSG:900913"),h=new OpenLayers.Projection("EPSG:4326"),f=f.transform(h,g),d.map=new OpenLayers.Map({div:e,projection:g,displayProjection:h});var k=new OpenLayers.Layer.OSM;d.map.addLayer(k)}d.map&&(d.map.setCenter(f,d.zoom||10),d.map.div.style.display="none")}else setTimeout(function(){l()},50)},l(),{_setup:function(b){window.OpenLayers||a.getScript("//openlayers.org/api/OpenLayers.js",function(){a.getScript("//maps.stamen.com/js/tile.stamen.js")});var c=function(){if(b.map){if(b.zoom=b.zoom||2,b.zoom&&"number"!=typeof b.zoom&&(b.zoom=+b.zoom),b.map.setCenter(f,b.zoom),b.markers){var d=OpenLayers.Util.extend({},OpenLayers.Feature.Vector.style["default"]),e=function(a){clickedFeature=a.feature,clickedFeature.attributes.text&&(k=new OpenLayers.Popup.FramedCloud("featurePopup",clickedFeature.geometry.getBounds().getCenterLonLat(),new OpenLayers.Size(120,250),clickedFeature.attributes.text,null,!0,function(){j.unselect(this.feature)}),clickedFeature.popup=k,k.feature=clickedFeature,b.map.addPopup(k))},l=function(a){feature=a.feature,feature.popup&&(k.feature=null,b.map.removePopup(feature.popup),feature.popup.destroy(),feature.popup=null)},m=function(b){a.getJSONP("//tinygeocoder.com/create-api.php?q="+b.location+"&callback=jsonp",function(a){var c=new OpenLayers.Geometry.Point(a[1],a[0]).transform(h,g),e=OpenLayers.Util.extend({},d);(!b.size||isNaN(b.size))&&(b.size=14),e.pointRadius=b.size,e.graphicOpacity=1,e.externalGraphic=b.icon;var f=new OpenLayers.Feature.Vector(c,null,e);b.text&&(f.attributes={text:b.text}),i.addFeatures([f])})};i=new OpenLayers.Layer.Vector("Point Layer",{style:d}),b.map.addLayer(i);for(var n=0,o=b.markers.length;o>n;n++){var p=b.markers[n];if(p.text&&(j||(j=new OpenLayers.Control.SelectFeature(i),b.map.addControl(j),j.activate(),i.events.on({featureselected:e,featureunselected:l}))),p.location){var q=m;q(p)}else{var r=new OpenLayers.Geometry.Point(p.lng,p.lat).transform(h,g),s=OpenLayers.Util.extend({},d);(!p.size||isNaN(p.size))&&(p.size=14),s.pointRadius=p.size,s.graphicOpacity=1,s.externalGraphic=p.icon;var t=new OpenLayers.Feature.Vector(r,null,s);p.text&&(t.attributes={text:p.text}),i.addFeatures([t])}}}}else setTimeout(function(){c()},13)};c()},start:function(a,c){b(c,"block")},end:function(a,c){b(c,"none")},_teardown:function(){m&&m.removeChild(e),e=map=f=g=h=i=j=k=null}}},{about:{name:"Popcorn OpenMap Plugin",version:"0.3",author:"@mapmeld",website:"mapadelsur.blogspot.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"map-container",type:{elem:"select",options:["ROADMAP","SATELLITE","TERRAIN"],label:"Map Type",optional:!0},zoom:{elem:"input",type:"number",label:"Zoom","default":2},lat:{elem:"input",type:"text",label:"Lat",optional:!0},lng:{elem:"input",type:"text",label:"Lng",optional:!0},location:{elem:"input",type:"text",label:"Location","default":"Toronto, Ontario, Canada"},markers:{elem:"input",type:"text",label:"List Markers",optional:!0}}})}(Popcorn),document.addEventListener("click",function(a){var b=a.target;("A"===b.nodeName||b.parentNode&&"A"===b.parentNode.nodeName)&&Popcorn.instances.forEach(function(a){a.options.pauseOnLinkClicked&&a.pause()})},!1),function(a){var b,c={},d=0,e=function(a){c[a]=document.createElement("div");var b=document.getElementById(a);return b&&b.appendChild(c[a]),c[a].style.height="100%",c[a].style.position="relative",c[a]},f=document.createElement("span"),g=["webkit","Moz","ms","O",""],h=["Transform","TransitionDuration","TransitionTimingFunction"],i={};document.getElementsByTagName("head")[0].appendChild(f);for(var j=0,k=h.length;k>j;j++)for(var l=0,m=g.length;m>l;l++)if(b=g[l]+h[j],b in f.style){i[h[j].toLowerCase()]=b;break}document.getElementsByTagName("head")[0].appendChild(f),a.plugin("wordriver",{manifest:{about:{name:"Popcorn WordRiver Plugin"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"wordriver-container",text:{elem:"input",type:"text",label:"Text","default":"Popcorn.js"},color:{elem:"input",type:"text",label:"Color","default":"Green",optional:!0}}},_setup:function(a){a._duration=a.end-a.start,a._container=c[a.target]||e(a.target),a.word=document.createElement("span"),a.word.style.position="absolute",a.word.style.whiteSpace="nowrap",a.word.style.opacity=0,a.word.style.MozTransitionProperty="opacity, -moz-transform",a.word.style.webkitTransitionProperty="opacity, -webkit-transform",a.word.style.OTransitionProperty="opacity, -o-transform",a.word.style.transitionProperty="opacity, transform",a.word.style[i.transitionduration]="1s, "+a._duration+"s",a.word.style[i.transitiontimingfunction]="linear",a.word.innerHTML=a.text,a.word.style.color=a.color||"black"},start:function(a,b){b._container.appendChild(b.word),b.word.style[i.transform]="",b.word.style.fontSize=~~(30+20*Math.random())+"px",d%=b._container.offsetWidth-b.word.offsetWidth,b.word.style.left=d+"px",d+=b.word.offsetWidth+10,b.word.style[i.transform]="translateY("+(b._container.offsetHeight-b.word.offsetHeight)+"px)",b.word.style.opacity=1,setTimeout(function(){b.word.style.opacity=0},1e3*(b.end-b.start-1||1))},end:function(a,b){b.word.style.opacity=0},_teardown:function(a){var b=document.getElementById(a.target);a.word.parentNode&&a._container.removeChild(a.word),c[a.target]&&!c[a.target].childElementCount&&b&&b.removeChild(c[a.target])&&delete c[a.target]}})}(Popcorn),function(a){var b=1;a.plugin("timeline",function(a){var c,d=document.getElementById(a.target),e=document.createElement("div"),f=!0;return d&&!d.firstChild?(d.appendChild(c=document.createElement("div")),c.style.width="inherit",c.style.height="inherit",c.style.overflow="auto"):c=d.firstChild,e.style.display="none",e.id="timelineDiv"+b,a.direction=a.direction||"up","down"===a.direction.toLowerCase()&&(f=!1),d&&c&&(f?c.insertBefore(e,c.firstChild):c.appendChild(e)),b++,e.innerHTML="<p><span id='big' style='font-size:24px; line-height: 130%;' >"+a.title+"</span><br /><span id='mid' style='font-size: 16px;'>"+a.text+"</span><br />"+a.innerHTML,{start:function(a,b){e.style.display="block","down"===b.direction&&(c.scrollTop=c.scrollHeight)},end:function(){e.style.display="none"},_teardown:function(){c&&e&&c.removeChild(e)&&!c.firstChild&&d.removeChild(c)}}},{about:{name:"Popcorn Timeline Plugin",version:"0.1",author:"David Seifried @dcseifried",website:"dseifried.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"feed-container",title:{elem:"input",type:"text",label:"Title"},text:{elem:"input",type:"text",label:"Text"},innerHTML:{elem:"input",type:"text",label:"HTML Code",optional:!0},direction:{elem:"select",options:["DOWN","UP"],label:"Direction",optional:!0}}})}(Popcorn),function(a,b){var c={};a.plugin("documentcloud",{manifest:{about:{name:"Popcorn Document Cloud Plugin",version:"0.1",author:"@humphd, @ChrisDeCairos",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"documentcloud-container",width:{elem:"input",type:"text",label:"Width",optional:!0},height:{elem:"input",type:"text",label:"Height",optional:!0},src:{elem:"input",type:"url",label:"PDF URL","default":"http://www.documentcloud.org/documents/70050-urbina-day-1-in-progress.html"},preload:{elem:"input",type:"checkbox",label:"Preload","default":!0},page:{elem:"input",type:"number",label:"Page Number",optional:!0},aid:{elem:"input",type:"number",label:"Annotation Id",optional:!0}}},_setup:function(d){function e(){function e(a){d._key=a.api.getId(),d._changeView=function(a){d.aid?a.pageSet.showAnnotation(a.api.getAnnotation(d.aid)):a.api.setCurrentPage(d.page)}}function f(b){var f=!1;return a.forEach(g.viewers,function(a){if(a.api.getSchema().canonicalURL===b){var h;e(a),h=c[d._key],d._containerId=h.id,h.num+=1,f=!0,g.loaded=!0}}),f}function i(){var a={num:1,id:d._containerId};c[d._key]=a,g.loaded=!0}g.loaded=!1;{var j,k=d.url.replace(/\.html$/,".js"),l=d.target,m=b.getElementById(l),n=b.createElement("div"),o=a.position(m),p=d.width||o.width,q=d.height||o.height,r=d.sidebar||!0,s=d.text||!0,t=d.pdf||!0,u=d.showAnnotations||!0,v=d.zoom||700,w=d.search||!0;d.page}if(!f(d.url)){n.id=d._containerId=a.guid(l),j="#"+n.id,m.appendChild(n),h.trigger("documentready");var x=d.page||d.aid?function(a){e(a),d._changeView(a),n.style.visibility="hidden",a.elements.pages.hide(),i()}:function(a){e(a),i(),n.style.visibility="hidden",a.elements.pages.hide()};g.load(k,{width:p,height:q,sidebar:r,text:s,pdf:t,showAnnotations:u,zoom:v,search:w,container:j,afterLoad:x})}}function f(){window.DV.loaded?e():setTimeout(f,25)}var g=window.DV=window.DV||{},h=this;if(g.loading)f();else{g.loading=!0,g.recordHit="//www.documentcloud.org/pixel.gif";var i=b.createElement("link"),j=b.getElementsByTagName("head")[0];i.rel="stylesheet",i.type="text/css",i.media="screen",i.href="//s3.documentcloud.org/viewer/viewer-datauri.css",j.appendChild(i),g.loaded=!1,a.getScript("http://s3.documentcloud.org/viewer/viewer.js",function(){g.loading=!1,e()})}},start:function(a,c){var d=b.getElementById(c._containerId),e=DV.viewers[c._key];(c.page||c.aid)&&e&&c._changeView(e),d&&e&&(d.style.visibility="visible",e.elements.pages.show())},end:function(a,c){var d=b.getElementById(c._containerId);d&&DV.viewers[c._key]&&(d.style.visibility="hidden",DV.viewers[c._key].elements.pages.hide())},_teardown:function(a){var d=b.getElementById(a._containerId),e=a._key;if(e&&DV.viewers[e]&&0===--c[e].num){for(DV.viewers[e].api.unload();d.hasChildNodes();)d.removeChild(d.lastChild);d.parentNode.removeChild(d)}}})}(Popcorn,window.document),function(a){a.parser("parseJSON","JSON",function(b){var c={title:"",remote:"",data:[]},d=b;return a.forEach(d.data,function(a){c.data.push(a)}),c})}(Popcorn),function(a){a.parser("parseSBV",function(a){var b,c={title:"",remote:"",data:[]},d=[],e=0,f=0,g=function(a){var b,c=a.split(":"),d=c.length-1;try{b=60*parseInt(c[d-1],10)+parseFloat(c[d],10),2===d&&(b+=3600*parseInt(c[0],10))}catch(e){throw"Bad cue"}return b},h=function(a,b){var c={};return c[a]=b,c};for(b=a.text.split(/(?:\r\n|\r|\n)/gm),f=b.length;f>e;){var i={},j=[],k=b[e++].split(",");try{for(i.start=g(k[0]),i.end=g(k[1]);f>e&&b[e];)j.push(b[e++]);i.text=j.join("<br />"),d.push(h("subtitle",i))}catch(l){for(;f>e&&b[e];)e++}for(;f>e&&!b[e];)e++}return c.data=d,c})}(Popcorn),function(a){function b(a,b){var c={};return c[a]=b,c}function c(a){var b=a.split(":");try{var c=b[2].split(",");return 1===c.length&&(c=b[2].split(".")),3600*parseFloat(b[0],10)+60*parseFloat(b[1],10)+parseFloat(c[0],10)+parseFloat(c[1],10)/1e3}catch(d){return 0}}function d(a){for(var b=a.length-1;b>=0&&!a[b];)b--;return b}a.parser("parseSRT",function(a){var e,f,g,h,i,j={title:"",remote:"",data:[]},k=[],l=0,m=0;for(e=a.text.split(/(?:\r\n|\r|\n)/gm),h=d(e)+1,l=0;h>l;l++){for(i={},g=[],i.id=parseInt(e[l++],10),f=e[l++].split(/[\t ]*-->[\t ]*/),i.start=c(f[0]),m=f[1].indexOf(" "),-1!==m&&(f[1]=f[1].substr(0,m)),i.end=c(f[1]);h>l&&e[l];)g.push(e[l++]);i.text=g.join("\\N").replace(/\{(\\[\w]+\(?([\w\d]+,?)+\)?)+\}/gi,""),i.text=i.text.replace(/</g,"&lt;").replace(/>/g,"&gt;"),i.text=i.text.replace(/&lt;(\/?(font|b|u|i|s))((\s+(\w|\w[\w\-]*\w)(\s*=\s*(?:\".*?\"|'.*?'|[^'\">\s]+))?)+\s*|\s*)(\/?)&gt;/gi,"<$1$3$7>"),i.text=i.text.replace(/\\N/gi,"<br />"),k.push(b("subtitle",i))}return j.data=k,j})}(Popcorn),function(a){function b(a,b){var e,f=a.substr(10).split(","),g=/\{(\\[\w]+\(?([\w\d]+,?)+\)?)+\}/gi,h=/\\N/gi;if(e={start:c(f[b.start]),end:c(f[b.end])},-1===e.start||-1===e.end)throw"Invalid time";return e.text=d(f,b.text).replace(g,"").replace(h,"<br />"),e}function c(a){var b=a.split(":");return 10!==a.length||b.length<3?-1:3600*parseInt(b[0],10)+60*parseInt(b[1],10)+parseFloat(b[2],10)}function d(a,b){for(var c=a.length,d=[],e=b;c>e;e++)d.push(a[e]);return d.join(",")}function e(a,b){var c={};return c[a]=b,c}function f(a){var b,c,d=a.substr(8).split(", "),e={};for(c=0,b=d.length;b>c;c++)"Start"===d[c]?e.start=c:"End"===d[c]?e.end=c:"Text"===d[c]&&(e.text=c);return e}a.parser("parseSSA",function(a){var c,d,g,h={title:"",remote:"",data:[]},i=/(?:\r\n|\r|\n)/gm,j=[],k=0;for(c=a.text.split(i),g=c.length;g>k&&"[Events]"!==c[k];)k++;for(d=f(c[++k]);++k<g&&c[k]&&"["!==c[k][0];)try{j.push(e("subtitle",b(c[k],d)))}catch(l){}return h.data=j,h})}(Popcorn),function(a){function b(a,f,g){for(var h,i=a.firstChild,j=c(a,g),k=[];i;)1===i.nodeType&&("p"===i.nodeName?k.push(d(i,f,j)):"div"===i.nodeName&&(h=e(i.getAttribute("begin")),0>h&&(h=f),k.push.apply(k,b(i,h,j)))),i=i.nextSibling;return k}function c(a,b){var c=a.getAttribute("region");return null!==c?c:b||""}function d(a,b,d){var f={};return f.text=(a.textContent||a.text).replace(h,"").replace(i,"<br />"),f.id=a.getAttribute("xml:id")||a.getAttribute("id"),f.start=e(a.getAttribute("begin"),b),f.end=e(a.getAttribute("end"),b),f.target=c(a,d),f.end<0&&(f.end=e(a.getAttribute("duration"),0),f.end>=0?f.end+=f.start:f.end=Number.MAX_VALUE),{subtitle:f}}function e(b,c){var d;if(!b)return-1;try{return a.util.toSeconds(b)}catch(e){return d=f(b),parseFloat(b.substring(0,d))*g(b.substring(d))+(c||0)}}function f(a){for(var b=a.length-1;b>=0&&a[b]<="9"&&a[b]>="0";)b--;return b}function g(a){return{h:3600,m:60,s:1,ms:.001}[a]||-1}var h=/^[\s]+|[\s]+$/gm,i=/(?:\r\n|\r|\n)/gm;a.parser("parseTTML",function(a){var c,d={title:"",remote:"",data:[]};if(!a.xml||!a.xml.documentElement)return d;if(c=a.xml.documentElement.firstChild,!c)return d;for(;"body"!==c.nodeName;)c=c.nextSibling;return c&&(d.data=b(c,0)),d})}(Popcorn),function(a){a.parser("parseTTXT",function(a){for(var b={title:"",remote:"",data:[]},c=function(a){var b=a.split(":"),c=0;try{return 60*parseFloat(b[0],10)*60+60*parseFloat(b[1],10)+parseFloat(b[2],10)}catch(d){c=0}return c},d=function(a,b){var c={};return c[a]=b,c},e=a.xml.lastChild.lastChild,f=Number.MAX_VALUE,g=[];e;){if(1===e.nodeType&&"TextSample"===e.nodeName){var h={};h.start=c(e.getAttribute("sampleTime")),h.text=e.getAttribute("text"),h.text&&(h.end=f-.001,g.push(d("subtitle",h))),f=h.start}e=e.previousSibling}return b.data=g.reverse(),b})}(Popcorn),function(a){function b(a){var b,c=a.split(":"),d=a.length;if(12!==d&&9!==d)throw"Bad cue";d=c.length-1;try{b=60*parseInt(c[d-1],10)+parseFloat(c[d],10),2===d&&(b+=3600*parseInt(c[0],10))}catch(e){throw"Bad cue"}return b}function c(a,b){var c={};return c[a]=b,c}function d(a){var c,d={},e=/-->/,f=/[\t ]+/;if(!a||-1===a.indexOf("-->"))throw"Bad cue";if(c=a.replace(e," --> ").split(f),c.length<2)throw"Bad cue";return d.id=a,d.start=b(c[0]),d.end=b(c[2]),d}function e(a,b,c){for(;b>c&&!a[c];)c++;return c}function f(a,b,c){for(;b>c&&a[c];)c++;return c}a.parser("parseVTT",function(a){var b,g,h,i={title:"",remote:"",data:[]},j=[],k=0,l=0,m=/(?:\r\n|\r|\n)/gm;if(b=a.text.split(m),l=b.length,0===l||"WEBVTT"!==b[0])return i;for(k++;l>k;){g=[];try{for(k=e(b,l,k),h=d(b[k++]);l>k&&b[k];)g.push(b[k++]);h.text=g.join("<br />"),j.push(c("subtitle",h))}catch(n){k=f(b,l,k)}}return i.data=j,i})}(Popcorn),function(a){a.parser("parseXML","XML",function(b){for(var c={title:"",remote:"",data:[]},d={},e=function(a){var b=a.split(":");return 1===b.length?parseFloat(b[0],10):2===b.length?parseFloat(b[0],10)+parseFloat(b[1]/12,10):3===b.length?parseInt(60*b[0],10)+parseFloat(b[1],10)+parseFloat(b[2]/12,10):4===b.length?parseInt(3600*b[0],10)+parseInt(60*b[1],10)+parseFloat(b[2],10)+parseFloat(b[3]/12,10):void 0},f=function(a){for(var b={},c=0,f=a.length;f>c;c++){var g=a.item(c).nodeName,h=a.item(c).nodeValue,i=d[h];if("in"===g)b.start=e(h);else if("out"===g)b.end=e(h);else if("resourceid"===g)for(var j in i)i.hasOwnProperty(j)&&(b[j]||"id"===j||(b[j]=i[j]));else b[g]=h}return b},g=function(a,b){var c={};return c[a]=b,c},h=function(b,e,i){var j={};a.extend(j,e,f(b.attributes),{text:b.textContent||b.text});var k=b.childNodes;if(k.length<1||1===k.length&&3===k[0].nodeType)i?d[j.id]=j:c.data.push(g(b.nodeName,j));else for(var l=0;l<k.length;l++)1===k[l].nodeType&&h(k[l],j,i)},i=b.documentElement.childNodes,j=0,k=i.length;k>j;j++)1===i[j].nodeType&&("manifest"===i[j].nodeName?h(i[j],{},!0):h(i[j],{},!1));return c})}(Popcorn),function(){var a=!1,b=!1;Popcorn.player("soundcloud",{_canPlayType:function(a,b){return/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(soundcloud)/.test(b)&&"video"!==a.toLowerCase()},_setup:function(c){function d(){a=!0,SC.initialize({client_id:"PRaNFlda6Bhf5utPjUsptg"}),SC.get("/resolve",{url:g.src},function(a){g.width=g.style.width?""+g.offsetWidth:"560",g.height=g.style.height?""+g.offsetHeight:"315",h.scrolling="no",h.frameborder="no",h.id="soundcloud-"+Popcorn.guid(),h.src="http://w.soundcloud.com/player/?url="+a.uri+"&show_artwork=false&buying=false&liking=false&sharing=false",h.width="100%",h.height="100%",c.loadListener=function(){c.widget=f=SC.Widget(h.id),f.bind(SC.Widget.Events.FINISH,function(){g.pause(),g.dispatchEvent("ended")}),f.bind(SC.Widget.Events.PLAY_PROGRESS,function(a){j=a.currentPosition/1e3,g.dispatchEvent("timeupdate")}),f.bind(SC.Widget.Events.PLAY,function(){k=l=!1,g.dispatchEvent("play"),g.dispatchEvent("playing"),g.currentTime=j,o.next()}),f.bind(SC.Widget.Events.PAUSE,function(){k=l=!0,g.dispatchEvent("pause"),o.next()}),f.bind(SC.Widget.Events.READY,function(){f.getDuration(function(a){m=a/1e3,g.style.visibility="visible",g.dispatchEvent("durationchange"),g.readyState=4,g.dispatchEvent("readystatechange"),g.dispatchEvent("loadedmetadata"),g.dispatchEvent("loadeddata"),g.dispatchEvent("canplaythrough"),g.dispatchEvent("load"),!g.paused&&g.play()}),f.getVolume(function(a){i=a/100})})},h.addEventListener("load",c.loadListener,!1),g.appendChild(h)})}function e(){b?!function c(){setTimeout(function(){a?d():c()},100)}():(b=!0,Popcorn.getScript("http://w.soundcloud.com/player/api.js",function(){Popcorn.getScript("http://connect.soundcloud.com/sdk.js",function(){d()})}))}var f,g=this,h=document.createElement("iframe"),i=1,j=0,k=!0,l=!0,m=0,n=!1,o=Popcorn.player.playerQueue();c._container=h,g.style.visibility="hidden",g.play=function(){k=!1,o.add(function(){l?f&&f.play():o.next()})},g.pause=function(){k=!0,o.add(function(){l?o.next():f&&f.pause()})},Object.defineProperties(g,{muted:{set:function(a){a?(f&&f.getVolume(function(a){i=a/100}),f&&f.setVolume(0),n=!0):(f&&f.setVolume(100*i),n=!1),g.dispatchEvent("volumechange")},get:function(){return n}},volume:{set:function(a){f&&f.setVolume(100*a),i=a,g.dispatchEvent("volumechange")},get:function(){return n?0:i}},currentTime:{set:function(a){j=a,f&&f.seekTo(1e3*a),g.dispatchEvent("seeked"),g.dispatchEvent("timeupdate")},get:function(){return j}},duration:{get:function(){return m}},paused:{get:function(){return k}}}),a?d():e()},_teardown:function(a){{var b=a.widget,c=SC.Widget.Events,d=a._container;d.parentNode}if(a.destroyed=!0,!b)return d.removeEventListener("load",a.loadEventListener,!1),void 0;for(var e in c)b&&b.unbind(c[e])}})}(),function(){function a(b){for(var c=a.options,d=c.parser[c.strictMode?"strict":"loose"].exec(b),e={},f=14;f--;)e[c.key[f]]=d[f]||"";return e[c.q.name]={},e[c.key[12]].replace(c.q.parser,function(a,b,d){b&&(e[c.q.name][b]=d)}),e}function b(a,b){return/player.vimeo.com\/video\/\d+/.test(b)||/vimeo.com\/\d+/.test(b)}a.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},Popcorn.player("vimeo",{_canPlayType:b,_setup:function(c){function d(a,b){var c=s.src.split("?")[0],d=JSON.stringify({method:a,value:b});return"//"===c.substr(0,2)&&(c=window.location.protocol+c),s.contentWindow?(s.contentWindow.postMessage(d,c),void 0):(q.unload(),void 0)}function e(a){if("http://player.vimeo.com"===a.origin){var b;try{b=JSON.parse(a.data)}catch(c){console.warn(c)}b.player_id==j&&(b.method&&v[b.method]&&v[b.method](b),b.event&&w[b.event]&&w[b.event](b))}}function f(a){t.error={},Popcorn.extend(t.error,p),t.error.code=a,q.dispatchEvent("error")}function g(){isNaN(t.duration)||(t.readyState=4,q.dispatchEvent("durationchange"),q.dispatchEvent("loadedmetadata"),q.dispatchEvent("loadeddata"),q.dispatchEvent("canplay"),q.dispatchEvent("canplaythrough"))}function h(){l||(l=setInterval(function(){q.dispatchEvent("timeupdate")},n)),k||(k=setInterval(function(){d("getCurrentTime")},o))}function i(){l&&(clearInterval(l),l=0),k&&(clearInterval(k),k=0)}var j,k,l,m,n=250,o=16,p={MEDIA_ERR_ABORTED:1,MEDIA_ERR_NETWORK:2,MEDIA_ERR_DECODE:3,MEDIA_ERR_SRC_NOT_SUPPORTED:4},q=this,r={q:[],queue:function(a){this.q.push(a),this.process()},process:function(){if(m)for(;this.q.length;){var a=this.q.shift();a()}}},s=document.createElement("iframe"),t={error:null,src:q.src,NETWORK_EMPTY:0,NETWORK_IDLE:1,NETWORK_LOADING:2,NETWORK_NO_SOURCE:3,networkState:0,HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4,readyState:0,seeking:!1,currentTime:0,duration:0/0,paused:!0,ended:!1,autoplay:!1,loop:!1,volume:1,muted:!1,width:0,height:0},u="error networkState readyState seeking duration paused ended";Popcorn.forEach(u.split(" "),function(a){Object.defineProperty(q,a,{get:function(){return t[a]}})}),Object.defineProperties(q,{src:{get:function(){return t.src},set:function(a){t.src=a,q.load()}},currentTime:{get:function(){return t.currentTime},set:function(a){r.queue(function(){d("seekTo",a)}),t.seeking=!0,q.dispatchEvent("seeking")}},autoplay:{get:function(){return t.autoplay},set:function(a){t.autoplay=!!a}},loop:{get:function(){return t.loop},set:function(a){t.loop=!!a,r.queue(function(){d("setLoop",loop)})}},volume:{get:function(){return t.volume},set:function(a){t.volume=a,r.queue(function(){d("setVolume",t.muted?0:t.volume)}),q.dispatchEvent("volumechange")}},muted:{get:function(){return t.muted},set:function(a){t.muted=!!a,r.queue(function(){d("setVolume",t.muted?0:t.volume)}),q.dispatchEvent("volumechange")}},width:{get:function(){return s.width},set:function(a){s.width=a}},height:{get:function(){return s.height},set:function(a){s.height=a}}});var v={getCurrentTime:function(a){t.currentTime=parseFloat(a.value)},getDuration:function(a){t.duration=parseFloat(a.value),g()},getVolume:function(a){t.volume=parseFloat(a.value)}},w={ready:function(){d("addEventListener","loadProgress"),d("addEventListener","playProgress"),d("addEventListener","play"),d("addEventListener","pause"),d("addEventListener","finish"),d("addEventListener","seek"),d("getDuration"),m=!0,r.process(),q.dispatchEvent("loadstart")},loadProgress:function(a){q.dispatchEvent("progress"),t.duration=parseFloat(a.data.duration)},playProgress:function(a){t.currentTime=parseFloat(a.data.seconds)},play:function(){t.seeking&&(t.seeking=!1,q.dispatchEvent("seeked")),t.paused=!1,t.ended=!1,h(),q.dispatchEvent("play")},pause:function(){t.paused=!0,i(),q.dispatchEvent("pause")},finish:function(){t.ended=!0,i(),q.dispatchEvent("ended")},seek:function(a){t.currentTime=parseFloat(a.data.seconds),t.seeking=!1,t.ended=!1,q.dispatchEvent("timeupdate"),q.dispatchEvent("seeked")}};q.load=function(){m=!1,j=Popcorn.guid();var d=a(t.src),e={},g=[],h={api:1,player_id:j};if(!b(q.nodeName,d.source))return f(t.MEDIA_ERR_SRC_NOT_SUPPORTED),void 0;Popcorn.extend(e,c),Popcorn.extend(e,d.queryKey),Popcorn.extend(e,h),d="http://player.vimeo.com/video/"+/\d+$/.exec(d.path)+"?";for(var i in e)e.hasOwnProperty(i)&&g.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));d+=g.join("&"),t.loop=!!d.match(/loop=1/),t.autoplay=!!d.match(/autoplay=1/),s.width=q.style.width?q.style.width:500,s.height=q.style.height?q.style.height:281,s.frameBorder=0,s.webkitAllowFullScreen=!0,s.mozAllowFullScreen=!0,s.allowFullScreen=!0,s.src=d,q.appendChild(s)},q.unload=function(){i(),window.removeEventListener("message",e,!1)},q.play=function(){r.queue(function(){d("play")})},q.pause=function(){r.queue(function(){d("pause")})},setTimeout(function(){window.addEventListener("message",e,!1),q.load()},0)},_teardown:function(){this.unload&&this.unload()}})}(),function(a,b){a.onYouTubePlayerAPIReady=function(){onYouTubePlayerAPIReady.ready=!0;for(var a=0;a<onYouTubePlayerAPIReady.waiting.length;a++)onYouTubePlayerAPIReady.waiting[a]()},a.YT&&(a.quarantineYT=a.YT,a.YT=null),onYouTubePlayerAPIReady.waiting=[];var c=!1;b.player("youtube",{_canPlayType:function(a,b){return"string"==typeof b&&/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(youtu)/.test(b)&&"video"!==a.toLowerCase()},_setup:function(d){a.YT||c||(c=!0,b.getScript("//youtube.com/player_api"));var e=this,f=!1,g=document.createElement("div"),h=0,i=!0,j=!1,k=0,l=!1,m=100,n=b.player.playerQueue(),o=function(){b.player.defineProperty(e,"currentTime",{set:function(a){d.destroyed||(j=!0,h=Math.round(100*+a)/100)},get:function(){return h}}),b.player.defineProperty(e,"paused",{get:function(){return i}}),b.player.defineProperty(e,"muted",{set:function(a){return d.destroyed?a:(d.youtubeObject.isMuted()!==a&&(a?d.youtubeObject.mute():d.youtubeObject.unMute(),l=d.youtubeObject.isMuted(),e.dispatchEvent("volumechange")),d.youtubeObject.isMuted())},get:function(){return d.destroyed?0:d.youtubeObject.isMuted()}}),b.player.defineProperty(e,"volume",{set:function(a){return d.destroyed?a:(d.youtubeObject.getVolume()/100!==a&&(d.youtubeObject.setVolume(100*a),m=d.youtubeObject.getVolume(),e.dispatchEvent("volumechange")),d.youtubeObject.getVolume()/100)},get:function(){return d.destroyed?0:d.youtubeObject.getVolume()/100}}),e.play=function(){d.destroyed||(i=!1,n.add(function(){1!==d.youtubeObject.getPlayerState()?(j=!1,d.youtubeObject.playVideo()):n.next()
}))},e.pause=function(){d.destroyed||(i=!0,n.add(function(){2!==d.youtubeObject.getPlayerState()?d.youtubeObject.pauseVideo():n.next()}))}};g.id=e.id+b.guid(),d._container=g,e.appendChild(g);var p=function(){var a,b,c,p,q,r=!0,s=function(){d.destroyed||(j?h===d.youtubeObject.getCurrentTime()?(j=!1,e.dispatchEvent("seeked"),e.dispatchEvent("timeupdate")):d.youtubeObject.seekTo(h):(h=d.youtubeObject.getCurrentTime(),e.dispatchEvent("timeupdate")),setTimeout(s,250))},t=function(a){var b=d.youtubeObject.getDuration();isNaN(b)||0===b?setTimeout(function(){t(2*a)},1e3*a):(e.duration=b,e.dispatchEvent("durationchange"),e.dispatchEvent("loadedmetadata"),e.dispatchEvent("loadeddata"),e.readyState=4,s(),e.dispatchEvent("canplaythrough"))};d.controls=0===+d.controls||1===+d.controls?d.controls:1,d.annotations=1===+d.annotations||3===+d.annotations?d.annotations:1,a=/^.*(?:\/|v=)(.{11})/.exec(e.src)[1],b=(e.src.split("?")[1]||"").replace(/v=.{11}/,""),b=b.replace(/&t=(?:(\d+)m)?(?:(\d+)s)?/,function(a,b,c){return b=0|b,c=0|c,k=+c+60*b,""}),b=b.replace(/&start=(\d+)?/,function(a,b){return b=0|b,k=b,""}),f=/autoplay=1/.test(b),c=b.split(/[\&\?]/g),p={wmode:"transparent"};for(var u=0;u<c.length;u++)q=c[u].split("="),p[q[0]]=q[1];d.youtubeObject=new YT.Player(g.id,{height:"100%",width:"100%",wmode:"transparent",playerVars:p,videoId:a,events:{onReady:function(){m=e.volume,l=e.muted,v(),i=e.paused,o(),d.youtubeObject.playVideo(),e.currentTime=k},onStateChange:function(a){d.destroyed||-1===a.data||(2===a.data?(i=!0,e.dispatchEvent("pause"),n.next()):1!==a.data||r?0===a.data?e.dispatchEvent("ended"):1===a.data&&r&&(r=!1,(f||!e.paused)&&(i=!1),i&&d.youtubeObject.pauseVideo(),t(.025)):(i=!1,e.dispatchEvent("play"),e.dispatchEvent("playing"),n.next()))},onError:function(a){-1!==[2,100,101,150].indexOf(a.data)&&(e.error={customCode:a.data},e.dispatchEvent("error"))}}});var v=function(){d.destroyed||(l!==d.youtubeObject.isMuted()&&(l=d.youtubeObject.isMuted(),e.dispatchEvent("volumechange")),m!==d.youtubeObject.getVolume()&&(m=d.youtubeObject.getVolume(),e.dispatchEvent("volumechange")),setTimeout(v,250))}};onYouTubePlayerAPIReady.ready?p():onYouTubePlayerAPIReady.waiting.push(p)},_teardown:function(a){a.destroyed=!0;var b=a.youtubeObject;b&&(b.stopVideo(),b.clearVideo&&b.clearVideo()),this.removeChild(document.getElementById(a._container.id))}})}(window,Popcorn),function(a){var b=function(b,c){var d,e=0,f=0;a.forEach(c.classes,function(a,b){for(d=[],"parent"===a?d[0]=document.querySelectorAll("#"+c.target)[0].parentNode:d=document.querySelectorAll("#"+c.target+" "+a),e=0,f=d.length;f>e;e++)d[e].classList.toggle(b)})};a.compose("applyclass",{manifest:{about:{name:"Popcorn applyclass Effect",version:"0.1",author:"@scottdowne",website:"scottdowne.wordpress.com"},options:{}},_setup:function(a){a.classes={},a.applyclass=a.applyclass||"";for(var b=a.applyclass.replace(/\s/g,"").split(","),c=[],d=0,e=b.length;e>d;d++)c=b[d].split(":"),c[0]&&(a.classes[c[0]]=c[1]||"")},start:b,end:b})}(Popcorn),plugins={},plugins.NSA=function(){console.log("test plugin")},plugins.popcorn=function(a){var b=a.find(".video"),c=b.find("iframe").attr("src"),d=b.find("iframe").css("width"),e=b.find("iframe").css("height");b.fadeOut(250,function(){this.remove()});var f="player_"+Math.round(100*Math.random(100)),g=f+"_annotations";a.prepend('<div id="'+f+'" class="annotation_player"><div id="'+g+'" class="annotations" /></div>'),a.find("#"+f).width(d).height(e);var h=Popcorn.youtube("#"+f,c);h.code({start:0,end:4,onStart:function(){$("#"+g).fadeOut(250,function(){$("#"+g).html('<div class="welcome">This video contains annotations</div>'),$("#"+g).fadeIn(250)})}}).code({start:14,end:24,onStart:function(){$("#"+g).fadeOut(250,function(){$("#"+g).html("iTest"),$("#"+g).fadeIn(250)})}}).footnote({start:54,end:98,target:g,text:'<a href="https://twitter.com/ioerror" target="_blank">Jacob Appelbaum on Twitter</a>'}).footnote({start:90,end:95,target:g,text:"Test 2"}).footnote({start:45,end:65,target:g,text:'<a href="http://www.cru-inc.com/products/wiebetech/mouse_jiggler" target="_blank">Mouse Jiggler</a>'})},function(a){!function(b){var c={loadPlugin:function(a){plugins&&plugins[a]&&plugins[a].call(this,this.$elem)},checkTags:function(b){var c=this.$elem.find(this.tag).filter(function(){return a(this).text()===b});c&&c.length>0&&this.loadPlugin(b)}};a.fn[b]=function(b){return b=a.extend(!0,{},c,b),this.each(function(){var c=this,d=a(c);b.$elem=d,b.elem=c;for(var e=0;e<b.plugins.length;e++)b.checkTags(b.plugins[e])})},a.fn[b].defaults=c}("tumblrPlugins")}(jQuery),function(a){!function(b){var c={getCurrentTrack:function(b,c){var d=this;a.ajax({url:b,data:null,success:function(a){d.showCurrentTrack(a,c)},dataType:"jsonp"})},showCurrentTrack:function(a,b){if(a.error)return console.error(a.message),void 0;var c=a.recenttracks.track;track=c[0],track&&"@attr"in track&&"true"==track["@attr"].nowplaying&&(b.find(".track").html(track.name+" by <strong>"+track.artist["#text"]+"</strong>"),b.addClass("active"),b.find(".track").delay(250).fadeIn(250))}};a.fn[b]=function(b){return b=a.extend(!0,{},c,b),this.each(function(){var c=this,d=a(c),e="http://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user="+b.username+"&api_key="+b.api_key+"&limit=1&format=json&callback=lastTrackCallback",f='<a href="http://www.lastfm.es/user/'+b.username+'" title="Currently listening"><div class="track"></div></a>';d.append(f),b.getCurrentTrack(e,d)})},a.fn[b].defaults=c}("snitch")}(jQuery),postCount=0,tags=[];var sentences=["Stop touching my face","This is very silly","Hi","How are you?"],onLogoClick=function(a){a.preventDefault();var b=30+Math.round(70*Math.random())+"px",c=sentences[Math.round(Math.random()*(sentences.length-1))],d=$(".bubble").width();$(".bubble").length>0?$(".bubble").fadeOut(250,function(){$(this).remove(),$("nav").append("<div class='bubble'></div>"),$(".bubble").css({top:b,right:d}),$(".bubble").html(c)}):($("nav").append("<div class='bubble'></div>"),$(".bubble").css({top:b,right:d}),$(".bubble").html(c))},bubbles=function(){$("nav a").click(onLogoClick)},tumblrStats=function(){var a="http://api.tumblr.com/v2/blog/blog.javierarce.com/posts?api_key=RhHmR8xQlhikht0tMBKZ9JIyMMyh221P3SvPULRQIiaEe8rw4i";$.ajax({url:a,dataType:"jsonp"}).done(function(a){if(200==a.meta.status&&"OK"==a.meta.msg){var b=a.response;postCount=b.total_posts;for(var c=0;c<b.posts.length;c++)if(b.posts[c].tags.length>0)for(var d=0;d<b.posts[c].tags.length;d++)tags.push(b.posts[c].tags[d]);if(tags=_.uniq(tags),tags.length>0&&postCount>0){$("#about .inner").append("<p class='tags' />");var e=function(a){for(var b,c,d=a.length;d;b=parseInt(Math.random()*d),c=a[--d],a[d]=a[b],a[b]=c);return a},f=e(tags);$("#about .inner p.tags").html("There are about "+10*Math.round(postCount/10)+" posts in this blog, with topics ranging from '"+f[0]+"' and '"+f[1]+"' to '"+f[2]+"', '"+f[3]+"' and '"+f[4]+"'.")}}})};$(function(){$("article").tumblrPlugins({tag:"li.tag a",plugins:["NSA","b"]}),$("#listening").snitch({username:"javierarce",api_key:"52baf5483029010e0e7ece53ac76449e"}),tumblrStats(),$("article.link").each(function(a,b){var c=$(b),d=c.height()-58;c.find(".comment").css("bottom",d)}),$("article.photo").each(function(a,b){var c=$(b),d=c.height()-c.find("img").height()+4;c.find(".comment").css("bottom",d)}),$("article footer .edit").live("click",function(a){a.preventDefault();var b=$(this).parents("article"),c="More"==$(this).text()?"Less":"More";b.find(".note").fadeToggle(250),$(this).text(c)}),$("article .note").each(function(a,b){var c=$(b),d=$(this).parents("article"),e=d.find("footer"),f=(parseInt(d.css("paddingBottom").replace("px","")),parseInt(c.css("paddingTop").replace("px",""))),g=parseInt(c.css("paddingBottom").replace("px","")),h=d.height()-e.height()-f-g;c.height()<h&&c.css({height:h});var i=$('<li class="more"><a href="#" class="edit">More</a></li>');e.find("ul").append(i)}),$("#about a.close").on("click",function(a){a.preventDefault(),a.stopPropagation(),$("div.about").slideToggle(50),$(this).toggleClass("open")}),$("a.about").on("click",function(a){a.preventDefault(),a.stopPropagation(),$(this).hasClass("open")?$(".main").animate({marginTop:0},250,function(){$("div.about").slideToggle(50),$(this).toggleClass("open")}):$(".main").animate({marginTop:"20px"},250,function(){$("div.about").slideToggle(50),$(this).toggleClass("open")})})});